/**
* Ctrip JavaScript Code
* http://m.ctrip.com/
* Copyright(C) 2008 - 2014, Ctrip All rights reserved.
* Date:2014_09_24 15:15:15
*/
define("cSessionStorage",["cBase","cAbstractStorage"],function(a,b){var c=new a.Class(b,{__propertys__:function(){},initialize:function($super,a){this.proxy=window.sessionStorage,$super(a)}});return c.getInstance=function(){return this.instance?this.instance:this.instance=new this},c.sessionStorage=c.getInstance(),c}),define("cSessionStore",["cBase","cAbstractStore","cSessionStorage"],function(a,b,c){var d=new a.Class(b,{__propertys__:function(){this.sProxy=c.getInstance()},initialize:function($super,a){$super(a)}});return d}),define("PageStore",["cBase","cStore","cUtility"],function(a,b){var c=new a.Class(b,{__propertys__:function(){this.CONST_TAG="tag",this.CONST_BACKURL="backurl",this.CONST_CALLBACK="callback",this.CONST_CURVALUE="curvalue"},initialize:function($super,a){$super(a)},save:function(a){var b=this.get(),c=this;$.isArray(b.callback)?$.each(b.callback,function(b,d){c._callFunByStr(d,a)}):this._callFunByStr(b.callback,a)},setCurrent:function(a,b,c,d){var e={};e[this.CONST_TAG]=a,e[this.CONST_BACKURL]=b,e[this.CONST_CALLBACK]=c,e[this.CONST_CURVALUE]=d,this.set(e)},getCurrent:function(){return this.get()},getValue:function(){var a=this.get();return this._callFunByStr(a.curvalue)},_callFunByStr:function(a,b,c,d){c=c||TaxiStore;var e,f,g,h=/^(?:(.*)::)?(.*):(.*)$/i.exec(a);if(h&&4===h.length&&!h[1]){if(e=c[h[2]],f=h[3],e&&e.getInstance){var i=e.getInstance()[f](b);return d&&d(i),i}}else h&&4===h.length&&h[1]&&(g=h[1],e=h[2],f=h[3],requirejs([g],function(a){if(a&&a[e]&&a[e].getInstance){var c=a[e].getInstance(),g=c[f]&&c[f](b);d&&d(g)}}));return!1}});return c}),define("cUIView",["libs","cUIAlert","cUIWarning","cUIHeadWarning","cUIWarning404","cUIToast","cSales","cStorage","cBase","CommonStore","cUtility","cAdView","cUILoading","cUIBubbleLayer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a,b,c){a&&a.originalEvent&&alert(a.originalEvent.message+" "+b+" "+c)}function p(){return!1}var q=h.localStorage;document.body&&(document.body.tabIndex=1e4);var r=new b({title:"提示信息",message:"",buttons:[{text:"知道了",click:function(){this.hide()}}]}),s=new b({title:"提示信息",message:"您的订单还未完成，是否确定要离开当前页面？",buttons:[{text:"取消",click:function(){this.hide()},type:b.STYLE_CANCEL},{text:"确定",click:function(){this.hide()},type:b.STYLE_CONFIRM}]}),t=new c({title:""}),u=new d({title:""}),v=new e,w=new m,x=new f,y=new n,z=null;return Backbone.View.extend({ENUM_STATE_NOCREATE:0,ENUM_STATE_CREATE:1,ENUM_STATE_LOAD:2,ENUM_STATE_SHOW:3,ENUM_STATE_HIDE:4,pageid:0,scrollPos:{x:0,y:0},header:null,footer:null,cSales:g,warning:null,alert:null,onCreate:function(){},viewInitialize:function(){},initialize:function(a,b,c){1==arguments.length&&(this.$el=arguments[0].el,a={query:{}},b={forward:function(){0},backward:function(){0},loadView:function(){0}},c=""),this.$el.addClass("sub-viewport"),this.id=_.uniqueId("viewport"),3==arguments.length&&this.$el.attr("id","id_"+this.id),c&&(this.viewname=c),this.pageid&&this.$el.attr("page-id",this.pageid),this.viewdata={},this.appliction=b,this.request=a,this.$el.attr("page-url",this.request.viewpath),this.state=this.ENUM_STATE_CREATE,this.alert=r,this.warning=t,this.headwarning=u,this.warning404=v,this.loading=w,this.toast=x,this.bubbleLayer=y,this.confirm=s,this.viewport=$(".main-viewport"),_.isArray(this.css)&&this.appendCss(this.css),l&&(this.footer=l.getInstance()),this.debug();try{this.onCreate()}catch(d){}},_initializeHeader:function(){var a=this;this.header.backUrl&&this.$el.on("click","#js_return",function(){a.back(a.header.backUrl)}),this.header.home&&this.$el.delegate("#js_home","click",function(){a.home()}),this.header.phone&&this.$el.find("#js_phone").attr("href","tel:"+this.header.phone),this.header.title&&this.$el.find("header h1").text(this.header.title),this.header.subtitle&&this.$el.find("header p").text(this.header.subtitle),this.header.rightAction&&this.$el.delegate("header div","click",this.header.rightAction)},_initializeFooter:function(){if(this.footer&&(this.footer.hide(),this.footer.setCurrentView(this)),!k.isInApp()&&this.hasAd&&!this.footer.isExpire()){var a=this.adContainer?this.$el.find("#"+this.adContainer):$("#footer"),b=this.footer.rootBox;b&&b.attr("id")!=a.attr("id")&&(this.footer.remove(),this.footer.isCreate=!1),this.footer.update({rootBox:a}),this.footer.show()}},__onLoad:function(a){document.activeElement&&document.activeElement.blur(),this.getServerDate(),this.disposeChannel(),this.header=this._getDefaultHeader(),this.state=this.ENUM_STATE_LOAD,this.onLoad&&this.onLoad(a)},__onShow:function(){document.activeElement&&document.activeElement.blur(),document.activeElement.blur,this.state=this.ENUM_STATE_SHOW,window.scrollTo(0,0),this.onShow&&this.onShow(),this._sendUbt(),this._initializeHeader(),this._initializeFooter(),this.__updateSales(this.$el),this.onBottomPull&&(this._onWidnowScroll=$.proxy(this.onWidnowScroll,this),this.addScrollListener()),this._sendGa(),this._sendKenshoo(),this.resetViewMinHeight(),this.FixedInput||(this.$("input").on("focus",function(a){("tel"==a.target.type||"text"==a.target.type)&&(z||(p(),z=setInterval(function(){p()},500)))}),this.FixedInput=!0)},resetViewMinHeight:function(){},__onHide:function(a){this.state=this.ENUM_STATE_HIDE,this.onHide&&this.onHide(a),this.hideHeadWarning(),this.hideWarning(),this.hideLoading(),this.hideWarning404(),this.hideToast(),this.hideConfirm(),this.hideMessage(),this.onBottomPull&&this.removeScrollListener()},showLoading:function(){this.loading.show(),this.loading.firer=this},hideLoading:function(){this.loading.firer&&this.loading.firer!=this||this.loading.hide()},forward:function(){this.appliction.forward.apply(null,arguments)},back:function(){this.appliction.back.apply(null,arguments)},jump:function(a,b){k.isInApp()?(a=a.replace(window.BASEURL,""),this.forward(a)):b?window.location.replace(a):window.location.href=a},home:function(){this.appliction.forward("")},setTitle:function(a){this.appliction.setTitle("携程旅行网-"+a)},restoreScrollPos:function(){window.scrollTo(this.scrollPos.x,this.scrollPos.y)},getQuery:function(a){return this.request.query[a]||null},getPath:function(a){return this.request.path[a]||null},getRoot:function(){return this.request.root||null},showMessage:function(a,b){this.alert.setViewData({message:a,title:b}),this.alert.show()},hideMessage:function(){this.alert.hide()},showConfirm:function(a,c,d,e,f,g){this.confirm.setViewData("object"==typeof a&&a.message?a:{message:a,title:c,buttons:[{text:g||"取消",click:function(){"function"==typeof e&&e(),this.hide()},type:b.STYLE_CANCEL},{text:f||"确定",click:function(){"function"==typeof d&&d(),this.hide()},type:b.STYLE_CONFIRM}]}),this.confirm.show()},hideConfirm:function(){this.confirm.hide()},showWarning:function(a,b){a&&this.warning.setTitle(a,b),this.warning.show()},hideWarning:function(){this.warning.hide()},showHeadWarning:function(a,b,c){a&&this.headwarning.setTitle(a,b,c),this.headwarning.show()},hideHeadWarning:function(){this.headwarning.hide()},showBubbleLayer:function(a){this.bubbleLayer.showMenu(a)},hideBubbleLayer:function(){this.bubbleLayer.hide()},showWarning404:function(a,b){a&&this.warning404.retryClick(a),this.warning404.show(),b&&this.warning404.options(b),this.warning404.firer=this},hideWarning404:function(){this.warning404.firer&&this.warning404.firer!==this||this.warning404.hide()},showNoHeadWarning:function(a,b){a&&this.NoHeadWarning.setContent(a,b),this.NoHeadWarning.show()},showToast:function(a,b,c,d){this.toast.isShow()||(d="undefined"!=typeof d?d:!0,this.toast.show(a,b,c,d),this.toast.firer=this)},hideToast:function(){this.toast.firer&&this.toast.firer!=this||this.toast.hide()},updateHeader:function(a){for(var b in a)this.header[b]=a[b];this._initializeHeader()},_getDefaultHeader:function(){return{backUrl:null,home:!1,phone:null,title:null,subtitle:null,rightAction:null}},__updateSales:function(a){var b=location.host,c=document.referrer,d="";b&&-1===c.indexOf(b)&&(c=c.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),c.indexOf("baidu")>-1&&(d="SEO_BAIDU"),c.indexOf("google")>-1&&(d="SEO_GOOGLE"),c.indexOf("soso.com")>-1&&(d="SEO_SOSO"),c.indexOf("sogou")>-1&&(d="SEO_SOGOU"),c.indexOf("m.so.com")>-1&&(d="SEO_SO"),c.indexOf("so.360")>-1&&(d="SEO_360SO"),c.indexOf("bing.com")>-1&&(d="SEO_BING"),c.indexOf("yahoo")>-1&&(d="SEO_YAHOO"),c.indexOf("youdao")>-1&&(d="SEO_YOUDAO"),(c.indexOf("jike.com")>-1||c.indexOf("babylon.com")>-1||c.indexOf("ask.com")>-1||c.indexOf("avg.com")>-1||c.indexOf("easou.com")>-1||c.indexOf("panguso.com")>-1||c.indexOf("yandex.com")>-1)&&(d="SEO_360SO"));var e=window.localStorage.getItem("SOURCEID"),f=this.getQuery("sourceid"),i=this.getQuery("sales"),k=j.SalesStore.getInstance().get(),l=this.getQuery("sales")||d||k&&k.sales,m=this.getQuery("sourceid")||e||k&&k.sourceid;(f&&+f>0||i&&i.length>0)&&h.localStorage.oldRemove("APP_DOWNLOAD"),l||m?(l&&g.setSales(l),m&&g.setSourceId(m),g.getSalesObject(l||m,$.proxy(function(b){if((!b.appurl||b.appurl.length<=0)&&this.footer&&this.footer.rootBox){var c=this.footer.rootBox.find("#dl_app");c.length>0&&c.hide()}this.warning404.tel=b.tel?b.tel:"4000086666",g.replaceContent(a)},this))):b&&-1===c.indexOf(b)&&(c=c.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),c.indexOf("baidu")>-1&&(l="SEO_BAIDU"),c.indexOf("google")>-1&&(l="SEO_GOOGLE"),c.indexOf("soso.com")>-1&&(l="SEO_SOSO"),c.indexOf("sogou")>-1&&(l="SEO_SOGOU"),c.indexOf("m.so.com")>-1&&(l="SEO_SO"),c.indexOf("so.360")>-1&&(l="SEO_360SO"),c.indexOf("bing.com")>-1&&(l="SEO_BING"),c.indexOf("yahoo")>-1&&(l="SEO_YAHOO"),c.indexOf("youdao")>-1&&(l="SEO_YOUDAO"),(c.indexOf("jike.com")>-1||c.indexOf("babylon.com")>-1||c.indexOf("ask.com")>-1||c.indexOf("avg.com")>-1||c.indexOf("easou.com")>-1||c.indexOf("panguso.com")>-1||c.indexOf("yandex.com")>-1)&&(d="SEO_360SO"),l&&g.setSales(l),setTimeout(function(){g.replaceContent(a)},1))},getServerDate:function(a){return k.getServerDate(a)},now:function(){return k.getServerDate()},debug:function(){var a=this.request.query.debug||q.get("DEBUG");"yes"==a?($(window).unbind("error",o),$(window).bind("error",o),q.set("DEBUG",a,new i.Date(i.getServerDate()).addDay(1).valueOf())):"no"==a&&($(window).unbind("error",o),q.remove("DEBUG"))},_sendUbt:function(){if(window.$_bf&&1==window.$_bf.loaded){if(0==this.pageid)return;var a=this._getAurl(),b=this.request.query,c=$("#page_id"),d=$("#bf_ubt_orderid"),e=location.protocol+"//"+location.host+a,f=+this.pageid;k.isInApp()&&(f+=1e3,e="http://hybridm.ctrip.com/"+a.substr(a.indexOf("webapp"))),1==c.length&&c.val(f),1==d.length&&d.val(b&&b.orderid?b.orderid:""),window.$_bf.asynRefresh({page_id:f,url:location.protocol+"//"+location.host+a})}else k.isInApp()||setTimeout($.proxy(this._sendUbt,this),300)},_sendGa:function(){if("undefined"!=typeof _gaq){var a=this._getAurl();_gaq.push(["_trackPageview",a])}else setTimeout($.proxy(this._sendGa,this),300)},_sendKenshoo:function(){var a=this.request.query;if(a&&a.orderid){var b="https://2113.xg4ken.com/media/redir.php?track=1&token=8515ce29-9946-4d41-9edc-2907d0a92490&promoCode=&valueCurrency=CNY&GCID=&kw=&product=";b+="&val="+a.val+"&orderId="+a.orderid+"&type="+a.type;var c="<img width='1' height='1' src='"+b+"'/>";$("body").append(c)}},_getAurl:function(){var a,b=this.request.root;return this.request.viewpath&&(b+="#"+this.request.viewpath),this.request.path.length>0&&(a=$.param(this.request.query),b+="!"+this.request.path.join("/")+(a.length?"?"+a:"")),b},disposeChannel:function(){var a,b=this.getQuery("allianceid"),c=this.getQuery("sid"),d=this.getQuery("ouid");if(b&&c){if(a={AllianceID:b,SID:c,OUID:d},j.UnionStore.getInstance().set(a),this.footer&&this.footer.rootBox){var e=this.footer.rootBox.find("#dl_app");e.length>0&&e.hide()}}else{var f=location.host,g=document.referrer;if(f&&-1===g.indexOf(f)&&(g=g.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),g.indexOf("baidu")>-1&&(b=b||"4897",c=c||"353693",d=d||""),g.indexOf("google")>-1&&(b=b||"4899",c=c||"353694",d=d||""),g.indexOf("soso.com")>-1&&(b=b||"4900",c=c||"353696",d=d||""),g.indexOf("sogou")>-1&&(b=b||"4901",c=c||"353698",d=d||""),g.indexOf("m.so.com")>-1&&(b=b||"5376",c=c||"353699",d=d||""),g.indexOf("so.360")>-1&&(b=b||"5376",c=c||"353700",d=d||""),g.indexOf("bing.com")>-1&&(b=b||"4902",c=c||"353701",d=d||""),g.indexOf("yahoo")>-1&&(b=b||"4903",c=c||"353703",d=d||""),g.indexOf("youdao")>-1&&(b=b||"4904",c=c||"353704",d=d||""),(g.indexOf("jike.com")>-1||g.indexOf("babylon.com")>-1||g.indexOf("ask.com")>-1||g.indexOf("avg.com")>-1||g.indexOf("easou.com")>-1||g.indexOf("panguso.com")>-1||g.indexOf("yandex.com")>-1)&&(b=b||"5376",c=c||"353700",d=d||""),b&&c&&(a={AllianceID:b,SID:c,OUID:d},j.UnionStore.getInstance().set(a),this.footer&&this.footer.rootBox))){var e=this.footer.rootBox.find("#dl_app");e.length>0&&e.hide()}}},getGuid:function(){return k.getGuid()},setTitle:function(a){document.title=a},appendCss:function(a){if(a)for(var b=0,c=a.length;c>b;b++)this.css[a[b]]||(this.head.append($('<link rel="stylesheet" type="text/css" href="'+a[b]+'" />')),this.css[a[b]]=!0)},addClass:function(a){this.$el.addClass(a)},removeClass:function(a){this.$el.removeClass(a)},__load:function(a){this.__onLoad(a)},show:function(){this.$el.parent()==this.viewport&&this.viewport.append(this.$el),this.$el.show(),this.__onShow()},hide:function(a){this.$el.hide(),this.__onHide(a)}})}),define("cCalendar",["cUtility"],function(a){"use strict";function b(a){if(a%100===0){if(a%400===0)return!0}else if(a%4===0)return!0;return!1}function c(a,c){return[31,b(a)?29:28,31,30,31,30,31,31,30,31,30,31][c]}function d(){}var e=a.Date.format,f=a.getServerDate(),g=function(){var a=new Date(f);return a.setHours(0,0,0,0),a}(),h={cls:"cui-calendar",monthsNum:1,animateSwitch:"right",format:"Y-m-d",days:"min",monthFormate:"Y年n月",appendElement:"body",startTime:g,todayCls:"cui_cld_today",endTime:Number.MAX_VALUE,header:{title:"",tel:!1,home:!1,homeHandler:d},headerTemplate:'<header><h1><%= title %></h1><i id="js_return" class="returnico lefthead"></i><% if(home) { %> <i class="icon_home i_bef" id="c-ui-header-home"></i> <% } %><% if(tel) { %><a href="tel:<%= tel %>" class="icon_phone i_bef __hreftel__" id="c-ui-header-tel"></a><% } %></header>',bodyPrefixTemplate:'<article class="cont_wrap"><div class="cui_cldwrap">',daysTemplate:'<ul class="cui_cldweek"><% _.each(days, function(day) { %><li><%= day %><% }); %></ul>',monthTemplate:'<section class="cui_cldunit"><h1 class="cui_cldmonth"><%= monthFormate %></h1><ul class="cui_cld_daybox"><% _.each(month, function(day) { %><li data-date="<%= day.format %>" class="<% if (day.invalid) { print("cui_cld_invalid cui_cld_daypass"); } else { print("cui_cld_valid"); } if(day.desc) { print(" cui_cld_day_havetxt"); } if (day.cls) { print(" " + day.cls); } %>"><em><%= day.value %></em><% if (day.desc) { %><i><%= day.desc %></i><% } %><% }); %></ul></section>',bodySuffixTemplate:"</div></article>",callback:d,onShow:d,onHide:d,constant:{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysShort:["周日","周一","周二","周三","周四","周五","周六"],daysMin:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["01月","02月","03月","04月","05月","06月","07月","08月","09月","10月","11月","12月"]}},i=function(a){a=a||{},this.options=$.extend(!0,{},h,a),this.$el=$("<div>").addClass(this.options.cls),this.initialize.apply(this,arguments),this.render()};return i.prototype={constructor:i,initialize:d,hasPushState:history&&history.pushState,show:function(){var a=this.options,b=this.$el,c=this.animateHandler(),d=this;return this._isShow?void 0:(this.hasPushState&&this.options.header&&("undefined"!=typeof Lizard&&(Lizard.stopStateWatch=!0),history.pushState({},document.title,location.href),$(window).one("popstate",function(){d.hide(!0),"undefined"!=typeof Lizard&&(Lizard.stopStateWatch=!1)})),a.animateSwitch?b.css({"-webkit-transform":c,transform:c}).show().animate({"-webkit-transform":"translate(0, 0)",transform:"translate(0, 0)"},500,"ease-in-out",function(){b.css({"-webkit-transform":"",transform:"",width:"100%"})}):b.show().css({width:"100%"}),this._isShow=!0,a.onShow.call(this),this)},hide:function(a){var b=this,c=this.options,d=this.$el,e=this.animateHandler();return this._isShow&&!a&&this.hasPushState&&this.options.header?(history.back(),this):(c.animateSwitch?d.animate({"-webkit-transform":e,transform:e},500,"ease-in-out",function(){d.hide()}):d.hide(),c.onHide.call(b),this._isShow=!1,this)},remove:function(){var a=this.$el;this.options.animateSwitch?setTimeout(function(){a.remove()},501):a.remove()},animateHandler:function(){var a,b=this.options.animateSwitch;if(b)switch(b){case"top":a="translate(0, 100%)";break;case"bottom":a="translate(0, -100%)";break;case"left":a="translate(-100%, 0)";break;case"right":a="translate(100%, 0)";break;default:a="translate(100%, 0)"}return a},setOptions:function(a,b){return _.isObject(a)?_.each(a,function(a,b){this.options[b]=a},this):this.options[a]=b,this},isValid:function(a){var b,c=this.options.startTime.getTime();return a=a.getTime(),b=_.isDate(this.options.endTime)?this.options.endTime.getTime():this.options.endTime,a-c>=0&&b-a>=0},bindEvents:function(){var a=this,b=this.options.header;this.$el.on("click",".cui_cld_valid",function(){var b=$(this),c=b.attr("data-date").split("-"),d=new Date(c[0],parseInt(c[1],10)-1,c[2]),f=d.getDay(),g=d.getMonth(),h=a.options.constant,i={days:h.days[f],daysShort:h.daysShort[f],daysMin:h.daysMin[f],months:h.months[g],monthsShort:h.monthsShort[g],value:e(d,a.options.format),holiday:a.getDateDesc(d).desc};a.options.callback.call(a,d,i,b)}),b&&(this.$el.on("click","#js_return",function(){a.hide()}),b.home&&this.$el.on("click","#c-ui-header-home",function(){b.homeHandler.call(a)}))},render:function(){var a=this.options,b=[],c=a.startTime.getFullYear(),d=a.startTime.getMonth();b.push(this.createHeader()),b.push(a.bodyPrefixTemplate),b.push(this.createDays());for(var e=0;e<a.monthsNum;e++)d+1>12&&(d=0,c++),b.push(this.createMonth(c,d++));b.push(a.bodySuffixTemplate),this.$el.css("display","none").html(b.join("")).appendTo($(a.appendElement)),"body"===a.appendElement?this.$el.css({position:"absolute",zIndex:3001,top:0,left:0,width:"99.5%",minHeight:document.body.scrollHeight}):this.$el.addClass("cui-calendar-static"),this.bindEvents()},createHeader:function(){var a=this.options.header;return a?_.template(this.options.headerTemplate,a):""},createDays:function(){var a,b=this.options.days,c=this.options.constant;return a="short"===b?c.daysShort:"min"===b?c.daysMin:c.days,_.template(this.options.daysTemplate,{days:a})},createMonth:function(a,b){for(var c=new Date(a,b),d=c.getDay(),f={monthFormate:e(c,this.options.monthFormate),month:[]},g=this.generateMonthModel(a,b),h=0;d>h;h++)f.month.push({invalid:!0,value:""});return f.month=f.month.concat(g),_.template(this.options.monthTemplate,f)},generateMonthModel:function(a,b){for(var d,f,g=c(a,b),h=[],i=1;g>=i;i++)d=new Date(a,b,i),f={invalid:!0,value:i},_.extend(f,this.getDateDesc(d)),this.isValid(d)&&(f.invalid=!1,f.format=e(d,"Y-m-d")),h.push(f);return h},getDateDesc:function(a){var b=864e5,c="",d="",e=a.getTime(),f=g.getTime();return e===f?(c="今天",d=this.options.todayCls):e-f===b?(c="明天",d=this.options.todayCls):e-f===2*b&&(c="后天",d=this.options.todayCls),{cls:d,desc:c}}},_.extend(i,{isLeapYear:b,getDaysInMonth:c,extend:Backbone.View.extend,dateFormat:e,defaults:h,serverDate:f}),i}),define("cHolidayCalendar",["cCalendar"],function(a){"use strict";function b(a){return 15&g[a-1900]}function c(a,b){return g[a-1900]&65536>>b?30:29}function d(a){return b(a)?65536&g[a-1900]?30:29:0}function e(a){for(var b=348,c=32768;c>8;c>>=1)b+=g[a-1900]&c?1:0;return b+d(a)}function f(a){var f,g=0,h=0,i={},j=new Date(1900,0,31),k=(a-j)/864e5;for(i.dayCyl=k+40,i.monCyl=14,f=1900;2050>f&&k>0;f++)h=e(f),k-=h,i.monCyl+=12;for(0>k&&(k+=h,f--,i.monCyl-=12),i.year=f,i.yearCyl=f-1864,g=b(f),i.isLeap=!1,f=1;13>f&&k>0;f++)g>0&&f===g+1&&i.isLeap===!1?(--f,i.isLeap=!0,h=d(i.year)):h=c(i.year,f),i.isLeap===!0&&f===g+1&&(i.isLeap=!1),k-=h,i.isLeap===!1&&i.monCyl++;return 0===k&&g>0&&f===g+1&&(i.isLeap?i.isLeap=!1:(i.isLeap=!0,--f,--i.monCyl)),0>k&&(k+=h,--f,--i.monCyl),i.month=f,i.day=k+1,i}var g=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835],h=_.defaults({holidayCls:"cui_cld_holiday",solarHoliday:{"0101":"元旦","0214":"情人节","0405":"清明","0501":"劳动节",1001:"国庆",1225:"圣诞节"},lunarHoliday:{1230:"除夕","0101":"春节","0115":"元宵","0505":"端午","0707":"七夕","0815":"中秋","0909":"重阳"},_lunarHoliday:{}},a.defaults),i=a.extend({initialize:function(a){this.options=$.extend(!0,{},h,a)},getDateDesc:function(a){var b,c,d,e=i.__super__.getDateDesc.apply(this,arguments),g=this.generateHolidayKey(a.getMonth()+1,a.getDate()),h=this.options;return h.solarHoliday[g]?(e.desc=h.solarHoliday[g],e.cls=h.holidayCls):(c=f(a),b=this.generateHolidayKey(c.month,c.day),d=a.getFullYear()+b,h.lunarHoliday[b]&&(h._lunarHoliday[d]&&h._lunarHoliday[d]===g?(e.desc=h.lunarHoliday[b],e.cls=h.holidayCls):h._lunarHoliday[d]||(e.desc=h.lunarHoliday[b],e.cls=h.holidayCls,h._lunarHoliday[d]=g))),e},generateHolidayKey:function(a,b){return 10>a&&(a="0"+a),10>b&&(b="0"+b),""+a+b}},{defaults:h});return i}),define("cHolidayPriceCalendar",["cHolidayCalendar"],function(a){"use strict";var b=_.defaults({unit:"¥",lowestCls:"price_lowest",monthTemplate:'<section class="cui_cldunit"><h1 class="cui_cldmonth"><%= monthFormate %></h1><ul class="cui_cld_daybox"><% _.each(month, function(day) { %><li <% if (day.price) { %> data-price="<%= day.price %>" <% } %> data-date="<%= day.format %>" class="<% if (day.invalid) { print("cui_cld_invalid cui_cld_daypass"); } else { print("cui_cld_valid"); } if(day.desc) { print(" cui_cld_day_havetxt"); } if (day.cls) { print(" " + day.cls); } %>"><em><%= day.value %></em><% if (day.desc) { %><i><%= day.desc %></i><% } %><% }); %></ul></section>',priceDate:[],startPriceTime:!1,voidInvalid:!0},a.defaults),c=a.extend({initialize:function(a){this.options=$.extend(!0,{},b,a),this.setPriceDate(this.options.priceDate)},generateMonthModel:function(b,c){for(var d,e,f,g,h=a.getDaysInMonth(b,c),i=[],j=this.options,k=1;h>=k;k++)d=new Date(b,c,k),f=d.getTime(),e=this.getDateDesc(d),g=j.priceDate[f],"undefined"!=typeof g?(e.value=e.desc?e.desc:k,e.desc=0!=g?j.unit+g:"",e.price=g):(e.invalid=j.voidInvalid,e.value=k),this.isPriceValidTime(d)||(e.invalid=!0),e.format=a.dateFormat(f,"Y-m-d"),i.push(e);return i},isPriceValidTime:function(a){var b=this.options.startPriceTime;return b?a.getTime()-b.getTime()>=0:this.isValid(a)},findMinPrice:function(){var a=this.$el.find(".cui_cld_daybox"),b=this.options.lowestCls;a.each(function(){var a,c=$(this).find("[data-price]"),d=[];c.each(function(){d.push(parseInt(this.getAttribute("data-price"),10))}),a=Math.min.apply(null,d),c.each(function(){var c=$(this),d=parseInt(c.attr("data-price"),10);d===a&&c.addClass(b)})})},setPriceDate:function(a){var b={};_.each(a,function(a){b[a.date.getTime()]=a.price}),this.options.priceDate=b}});return c}),define("rsa",[],function(){function a(a){K=a,L=new Array(K);for(var c=0;c<L.length;c++)L[c]=0;M=new b,N=new b,N.digits[0]=1}function b(a){this.digits="boolean"==typeof a&&1==a?null:L.slice(0),this.isNeg=!1}function c(a){var c=new b(!0);return c.digits=a.digits.slice(0),c.isNeg=a.isNeg,c}function d(a){var c=new b;c.isNeg=0>a,a=Math.abs(a);for(var d=0;a>0;)c.digits[d++]=a&T,a=Math.floor(a/Q);return c}function e(a){for(var b="",c=a.length-1;c>-1;--c)b+=a.charAt(c);return b}function f(a,c){var d=new b;d.digits[0]=c;for(var f=A(a,d),g=U[f[1].digits[0]];1==z(f[0],M);)f=A(f[0],d),digit=f[1].digits[0],g+=U[f[1].digits[0]];return(a.isNeg?"-":"")+e(g)}function g(a){var b=15,c="";for(i=0;4>i;++i)c+=V[a&b],a>>>=4;return e(c)}function h(a){for(var b="",c=(p(a),p(a));c>-1;--c)b+=g(a.digits[c]);return b}function k(a){var b,c=48,d=c+9,e=97,f=e+25,g=65,h=90;return b=a>=c&&d>=a?a-c:a>=g&&h>=a?10+a-g:a>=e&&f>=a?10+a-e:0}function l(a){for(var b=0,c=Math.min(a.length,4),d=0;c>d;++d)b<<=4,b|=k(a.charCodeAt(d));return b}function m(a){for(var c=new b,d=a.length,e=d,f=0;e>0;e-=4,++f)c.digits[f]=l(a.substr(Math.max(e-4,0),Math.min(e,4)));return c}function n(a,c){var d;if(a.isNeg!=c.isNeg)c.isNeg=!c.isNeg,d=o(a,c),c.isNeg=!c.isNeg;else{d=new b;for(var e,f=0,g=0;g<a.digits.length;++g)e=a.digits[g]+c.digits[g]+f,d.digits[g]=e%Q,f=Number(e>=Q);d.isNeg=a.isNeg}return d}function o(a,c){var d;if(a.isNeg!=c.isNeg)c.isNeg=!c.isNeg,d=n(a,c),c.isNeg=!c.isNeg;else{d=new b;var e,f;f=0;for(var g=0;g<a.digits.length;++g)e=a.digits[g]-c.digits[g]+f,d.digits[g]=e%Q,d.digits[g]<0&&(d.digits[g]+=Q),f=0-Number(0>e);if(-1==f){f=0;for(var g=0;g<a.digits.length;++g)e=0-d.digits[g]+f,d.digits[g]=e%Q,d.digits[g]<0&&(d.digits[g]+=Q),f=0-Number(0>e);d.isNeg=!a.isNeg}else d.isNeg=a.isNeg}return d}function p(a){for(var b=a.digits.length-1;b>0&&0==a.digits[b];)--b;return b}function q(a){var b,c=p(a),d=a.digits[c],e=(c+1)*P;for(b=e;b>e-P&&0==(32768&d);--b)d<<=1;return b}function r(a,c){for(var d,e,f,g=new b,h=p(a),i=p(c),k=0;i>=k;++k){for(d=0,f=k,j=0;h>=j;++j,++f)e=g.digits[f]+a.digits[j]*c.digits[k]+d,g.digits[f]=e&T,d=e>>>O;g.digits[k+h+1]=d}return g.isNeg=a.isNeg!=c.isNeg,g}function s(a,c){var d,e,f;result=new b,d=p(a),e=0;for(var g=0;d>=g;++g)f=result.digits[g]+a.digits[g]*c+e,result.digits[g]=f&T,e=f>>>O;return result.digits[1+d]=e,result}function t(a,b,c,d,e){for(var f=Math.min(b+e,a.length),g=b,h=d;f>g;++g,++h)c[h]=a[g]}function u(a,c){var d=Math.floor(c/P),e=new b;t(a.digits,0,e.digits,d,e.digits.length-d);for(var f=c%P,g=P-f,h=e.digits.length-1,i=h-1;h>0;--h,--i)e.digits[h]=e.digits[h]<<f&T|(e.digits[i]&W[f])>>>g;return e.digits[0]=e.digits[h]<<f&T,e.isNeg=a.isNeg,e}function v(a,c){var d=Math.floor(c/P),e=new b;t(a.digits,d,e.digits,0,a.digits.length-d);for(var f=c%P,g=P-f,h=0,i=h+1;h<e.digits.length-1;++h,++i)e.digits[h]=e.digits[h]>>>f|(e.digits[i]&X[f])<<g;return e.digits[e.digits.length-1]>>>=f,e.isNeg=a.isNeg,e}function w(a,c){var d=new b;return t(a.digits,0,d.digits,c,d.digits.length-c),d}function x(a,c){var d=new b;return t(a.digits,c,d.digits,0,d.digits.length-c),d}function y(a,c){var d=new b;return t(a.digits,0,d.digits,0,c),d}function z(a,b){if(a.isNeg!=b.isNeg)return 1-2*Number(a.isNeg);for(var c=a.digits.length-1;c>=0;--c)if(a.digits[c]!=b.digits[c])return a.isNeg?1-2*Number(a.digits[c]>b.digits[c]):1-2*Number(a.digits[c]<b.digits[c]);return 0}function A(a,d){var e,f,g=q(a),h=q(d),i=d.isNeg;if(h>g)return a.isNeg?(e=c(N),e.isNeg=!d.isNeg,a.isNeg=!1,d.isNeg=!1,f=o(d,a),a.isNeg=!0,d.isNeg=i):(e=new b,f=c(a)),new Array(e,f);e=new b,f=a;for(var j=Math.ceil(h/P)-1,k=0;d.digits[j]<R;)d=u(d,1),++k,++h,j=Math.ceil(h/P)-1;f=u(f,k),g+=k;for(var l=Math.ceil(g/P)-1,m=w(d,l-j);-1!=z(f,m);)++e.digits[l-j],f=o(f,m);for(var r=l;r>j;--r){var t=r>=f.digits.length?0:f.digits[r],x=r-1>=f.digits.length?0:f.digits[r-1],y=r-2>=f.digits.length?0:f.digits[r-2],A=j>=d.digits.length?0:d.digits[j],B=j-1>=d.digits.length?0:d.digits[j-1];e.digits[r-j-1]=t==A?T:Math.floor((t*Q+x)/A);for(var C=e.digits[r-j-1]*(A*Q+B),D=t*S+(x*Q+y);C>D;)--e.digits[r-j-1],C=e.digits[r-j-1]*(A*Q|B),D=t*Q*Q+(x*Q+y);m=w(d,r-j-1),f=o(f,s(m,e.digits[r-j-1])),f.isNeg&&(f=n(f,m),--e.digits[r-j-1])}return f=v(f,k),e.isNeg=a.isNeg!=i,a.isNeg&&(e=i?n(e,N):o(e,N),d=v(d,k),f=o(d,f)),0==f.digits[0]&&0==p(f)&&(f.isNeg=!1),new Array(e,f)}function B(a,b){return A(a,b)[0]}function C(a){this.modulus=c(a),this.k=p(this.modulus)+1;var d=new b;d.digits[2*this.k]=1,this.mu=B(d,this.modulus),this.bkplus1=new b,this.bkplus1.digits[this.k+1]=1,this.modulo=D,this.multiplyMod=E,this.powMod=F}function D(a){var b=x(a,this.k-1),c=r(b,this.mu),d=x(c,this.k+1),e=y(a,this.k+1),f=r(d,this.modulus),g=y(f,this.k+1),h=o(e,g);h.isNeg&&(h=n(h,this.bkplus1));for(var i=z(h,this.modulus)>=0;i;)h=o(h,this.modulus),i=z(h,this.modulus)>=0;return h}function E(a,b){var c=r(a,b);return this.modulo(c)}function F(a,c){var d=new b;d.digits[0]=1;for(var e=a,f=c;;){if(0!=(1&f.digits[0])&&(d=this.multiplyMod(d,e)),f=v(f,1),0==f.digits[0]&&0==p(f))break;e=this.multiplyMod(e,e)}return d}function G(a,b,c){this.e=m(a),this.d=m(b),this.m=m(c),this.digitSize=2*p(this.m)+2,this.chunkSize=this.digitSize-11,this.radix=16,this.barrett=new C(this.m)}function H(a,c){if(a.chunkSize>a.digitSize-11)return"Error";for(var d=new Array,e=c.length,g=0;e>g;)d[g]=c.charCodeAt(g),g++;var i,j,k,l=d.length,m="";for(g=0;l>g;g+=a.chunkSize){k=new b,i=0;var n,o=g+a.chunkSize>l?l%a.chunkSize:a.chunkSize,p=new Array;for(n=0;o>n;n++)p[n]=d[g+o-1-n];p[o]=0;var q=Math.max(8,a.digitSize-3-o);for(n=0;q>n;n++)p[o+1+n]=Math.floor(254*Math.random())+1;for(p[a.digitSize-2]=2,p[a.digitSize-1]=0,j=0;j<a.digitSize;++i)k.digits[i]=p[j++],k.digits[i]+=p[j++]<<8;var r=a.barrett.powMod(k,a.e),s=16==a.radix?h(r):f(r,a.radix);m+=s+" "}return m.substring(0,m.length-1)}function I(a){{var b,c,d,e,f,g,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1)}for(d=a.length,c=0,b="";d>c;){if(e=255&a.charCodeAt(c++),c==d){b+=h.charAt(e>>2),b+=h.charAt((3&e)<<4),b+="==";break}if(f=a.charCodeAt(c++),c==d){b+=h.charAt(e>>2),b+=h.charAt((3&e)<<4|(240&f)>>4),b+=h.charAt((15&f)<<2),b+="=";break}g=a.charCodeAt(c++),b+=h.charAt(e>>2),b+=h.charAt((3&e)<<4|(240&f)>>4),b+=h.charAt((15&f)<<2|(192&g)>>6),b+=h.charAt(63&g)}return b}function J(a){var b=H(Y,I(a));return b}var K,L,M,N,O=16,P=O,Q=65536,R=Q>>>1,S=Q*Q,T=Q-1;a(20);var U=(d(1e15),new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z")),V=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),W=new Array(0,32768,49152,57344,61440,63488,64512,65024,65280,65408,65472,65504,65520,65528,65532,65534,65535),X=new Array(0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535);a(131);var Y=new G("10001","","B7273B08845EB1D93C9A6EB9C45BE087AF9E692C8B7DD6D38DECFA732E9A6CDCB52106BDDB9E13100AEF3638358D5B5EB9011C33B7AC3F697078C0572585B94119196F627025C6E7FA9AA5C82B149E2BB30FEA7D777AA453324A301FD46413E11A7DB4A9D5B2D4BD6330AE2C477D48250F057ABEF2BD76DC7574897254736A71");return{rsaEncrypted:J}}),define("cWidgetHeaderView",["cBase","cUICore","cWidgetFactory","cUtility","cHybridFacade"],function(a,b,c,d,e){"use strict";function f(c){if(f.instance)return f.instance.reset(c),f.instance;var d=new a.Class(b.AbstractView,j);return f.instance=new d(c)}var g="HeaderView";if(!c.hasWidget(g)){var h=function(){var a=this.templateFactory(this.data);return $(a)},i=function(a){if(this.html="",a&&a.data){a.data.customtitle&&this.htmlMap.title?delete this.htmlMap.title:this.htmlMap.title="<h1><%=title %></h1>";
for(var b in this.htmlMap)a.data[b]&&(this.html+=this.htmlMap[b]);var c="",d=a.data.style;d&&(c=' style="'+d+'"'),this.html="<header"+c+">"+this.html+"</header>"}},j=j||{};j.__propertys__=function(){},j.initialize=function($super,a){a?(this.rootBox=a.container||$($("#headerview").length>0?"#headerview":'<div id="headerview"></div>'),this.data=a.data,this.html=a.html||this.html,this.data&&(this.bindEvents=a.data.bindEvents||function(){}),i.call(this,a),a.onShow=this.onShow):(this.rootBox=$($("#headerview").length>0?"#headerview":'<div id="headerview"></div>'),a={onShow:this.onShow}),$super(a)},j.createHtml=function(){return this.html?(this.templateFactory=this.template(this.html),h.call(this)):void 0},j.onShow=function(){if(this.rootBox.off("click"),this.data&&this.data.btn&&"function"==typeof this.bindEvents&&this.bindEvents(this.getView()),this.data&&this.data.events&&this.delegateEvents(this.data.events,this.data.view),this.data&&this.data.commit){var a=this.data.commit,b=this.getView(),c=this,d=function(){a.callback.call(c.view)};b.find("#"+a.id).on("click",d),e.register({tagname:e.METHOD_COMMIT,callback:d})}},j.set=function(a){a&&(this.htmlMap&&!this.htmlMap.title&&(this.htmlMap.title="<h1><%=title %></h1>"),this.data=a,i.call(this,{data:a}),this.bindEvents=this.data.bindEvents,this.isCreate=!1,this.hide())},j.reset=function(a){a&&(this.set(a),this.trigger("onShow"))},j.delegateEvents=function(a,b){if(a){k.call(this,"#c-ui-header-home","click",a.homeHandler,b),k.call(this,"#c-ui-header-return","click",a.returnHandler,b),this.rootBox.find("header").append($("#c-ui-header-return"));var c=this,d=function(){a.returnHandler.call(b||c)};if(e.register({tagname:e.METHOD_BACK,callback:d}),a.citybtnHandler){var f=function(){a.citybtnHandler.call(b||c)};e.register({tagname:e.METHOD_CITY_CHOOSE,callback:f})}}};var k=function(a,b,c,d){this.rootBox.find(a).on(b,function(){c.call(d||this)})};j.getView=function(){return this.rootBox},j.updateHeader=function(a,b){this.data[a]=b,this.set(this.data),this.show()},j.html=null,j.htmlMap={home:'<i class="icon_home i_bef" id="c-ui-header-home"></i>',tel:'<a href="tel:<%=tel.number||4000086666 %>" class="icon_phone i_bef __hreftel__" id="c-ui-header-tel"></a>',customtitle:"<div><%=customtitle %></div>",title:"<h1><%=title %></h1>",back:'<i id="c-ui-header-return" class="returnico i_bef"></i>',btn:'<i id="<%=btn.id%>" class="<%=btn.classname%>"><%=btn.title %></i>',custom:"<%=custom %>"},j.create=function(){this.isCreate||this.status===b.AbstractView.STATE_ONCREATE||(this.rootBox=this.rootBox||$("body"),this.rootBox.empty(),this.root=$(this.createHtml()),this.rootBox.append(this.root),d.isInApp()||this.rootBox.css("height",this.root.css("height")),this.trigger("onCreate"),this.status=b.AbstractView.STATE_ONCREATE,this.isCreate=!0)},j.hideHandler=function(){d.isInApp()?this.isHidden||(e.request({name:e.METHOD_SET_NAVBAR_HIDDEN,isNeedHidden:!0}),this.isHidden=!0):this.hide()},j.showAction=function(a){d.isInApp()?(this.rootBox.hide(),this.isHidden&&(e.request({name:e.METHOD_SET_NAVBAR_HIDDEN,isNeedHidden:!1}),this.isHidden=!1),this.saveHead()):this.root.show(),a()},j.saveHead=function(){var a={left:[],center:[],centerButtons:[],right:[]},b=this.data;b.back&&a.left.push({tagname:"back"}),b.title&&a.center.push({tagname:"title",value:b.title}),b.subtitle&&a.center.push({tagname:"subtitle",value:b.subtitle}),b.btn&&a.right.push({tagname:"commit",value:b.btn.title}),b.tel&&a.right.push({tagname:"call"}),b.home&&a.right.push({tagname:"home"}),b.citybtn&&a.centerButtons.push({tagname:"cityChoose",value:b.citybtn,a_icon:"icon_arrowx",i_icon:"icon_arrowx.png"});try{var c=JSON.stringify(a);e.request({name:e.METHOD_REFRESH_NAV_BAR,config:c})}catch(d){}},c.register({name:g,fn:f})}}),define("cWidgetListView",["cBase","cUICore","cWidgetFactory"],function(a,b,c){"use strict";var d="ListView";if(!c.hasWidget(d)){var e=function(b){for(var c=new a.Hash,d=0;d<b.length;d++)c.add($(b[d]).data("hash"),$(b[d]));return c},f=f||{};f.__propertys__=function(){},f.initialize=function($super,a){if(a.container&&(this.rootBox=a.container),this.noResultText="您还没有记录哦",this.autoEmptyView="undefined"!=typeof a.autoEmptyView?a.autoEmptyView:!0,a.noResultText&&(this.noResultText=a.noResultText),a.listadapter&&(this.listadapter=a.listadapter,this.listadapter.regiseterObserver(this)),a.origin&&(this.origin=a.origin),!a.itemView)throw"ListView:no item view template";this.templateFactory=this.template(a.itemView),this.bindItemViewEvent=a.bindItemViewEvent,this.onUpdatePrepared=a.onUpdatePrepared,this.onUpdateFinished=a.onUpdateFinished,$super(a)},f.createHtml=function(){return this.update()},f.createItemView=function(a,b){var c=this.templateFactory(a);return $(c).addClass("c-item-view").data("hash",b)},f.update=function(){var b=this.rootBox.find(".c-item-view");this.map=e(b),this.onUpdatePrepared&&"function"==typeof this.onUpdatePrepared&&this.onUpdatePrepared();var c=new a.Hash,d=this,f=function(a,b,e){var f=d.map.getItem(b);f||(a.C_ITEM_INDEX=e,a.__origin__=d.origin,f=d.createItemView(a,b),d.bindItemViewEvent(f)),c.add(b,f)};if(this.listadapter.map.each(f),this.rootBox.hide(),this.rootBox.empty(),this.listadapter.list.length>0){var g=function(a){d.rootBox.append(a)};c.each(g)}else this.autoEmptyView&&this.rootBox.append('<div class="cui-load-error"><div class="cui-i cui-wifi cui-exclam"></div>'+this.noResultText+"</div>");this.rootBox.show(),this.onUpdateFinished&&"function"==typeof this.onUpdateFinished&&this.onUpdateFinished()},f.onUpdatePrepared=function(){},f.onUpdateFinished=function(){},f.openAutoEmptyView=function(){this.autoEmptyView=!0},f.closeAutoEmptyView=function(){this.autoEmptyView=!1};var g=new a.Class(b.AbstractView,f);c.register({name:d,fn:g})}}),define("cWidgetTipslayer",["cBase","cUICore","cWidgetFactory","cUIScroll"],function(a,b,c,d){"use strict";var e="TipsLayer";if(!c.hasWidget(e)){var f=new a.Class(b.Layer,{__propertys__:function(){this.showTitle=!0,this.contentDom,this.title="",this.body="",this.mask=new b.Mask({classNames:[b.config.prefix+"opacitymask"]});var a=this;this.mask.addEvent("onShow",function(){this.setzIndexTop(-1),$(window).bind("resize",this.onResize),this.onResize();var b=this;this.root.bind("click",function(){b.hide(),b.root.unbind("click"),a.hide()})}),this._loadButtonHtml=function(){if(0==this.buttons.length)return"";var a=['<div class="cui-roller-btns">'];return $.each(this.buttons,function(b,c){var d="cui-btns-sure";"cancle"==c.type&&(d="cui-btns-cancle"),a.push('<div class="cui-flexbd '+d+'">'+c.text+"</div>")}),a.push("</div>"),a.join("")},this.html=""},initialize:function($super,a){$super({onCreate:function(){},onShow:function(){this.title=a.title||"",this.buttons=a.buttons||[],this.html=a.html||"","undefined"!=typeof a.showTitle&&(this.showTitle=a.showTitle),this.html=$(this.html),this.btns=$(this._loadButtonHtml()),this.header=a.header,this.footer=a.footer,this.buttons=a.buttons||[],this.contentDom.html(['<div class="cui-pop-box">','<div class="cui-hd">'+this.title+'<div class="lab-close-area"><span class="cui-top-close">×</span></div></div>','<div class="cui-bd" style="overflow: hidden; position: relative; background-color: #fafafa; width: 100%;">',"</div>","</div>"].join("")),a.width&&this.contentDom.find(".cui-pop-box").css({width:a.width+"px"}),this.mask.show(),this.reposition(),this.closeDom=this.contentDom.find(".cui-top-close").parent(),this.body=this.contentDom.find(".cui-bd"),this.header&&this.body.before($(this.header)),this.footer&&this.body.after($(this.footer)),this.html.length>1&&(this.html=$('<div style="width: 100%;"></div>').append(this.html)),this.html.css("background-color","white"),this.body.append(this.html);var b=parseInt(.7*$(window).height()),c=a.height||b,e=this.html.height();c>b&&(c=b),e>c&&this.body.css({height:c+"px"}),this.showTitle||this.contentDom.find(".cui-hd").hide();var f={wrapper:this.body,scroller:this.html};$.extend(f,a),this.s=new d(f),this.contentDom.find(".cui-pop-box").append(this.btns);var g=this;this.closeDom.on("click",function(){g.hide()}),$.each(this.btns.children(),function(a,b){var c=g.buttons[a].click;$(b).on("click",function(){c.call(g)})}),this.setHtml=function(a){g.body.html(a)}},onHide:function(){this.s&&this.s.destroy(),this.mask.hide(),this.closeDom.off("click"),this.root.remove(),this.mask.root.remove()}})}});c.register({name:e,fn:f})}}),define("cWidgetInputValidator",["cBase","cUICore","cWidgetFactory","cUtility","libs"],function(cBase,cUICore,WidgetFactory,util){"use strict";var validate=util.validate,WIDGET_NAME="InputValidator";if(!WidgetFactory.hasWidget(WIDGET_NAME)){var InputValidator=new cBase.Class(cUICore.Layer,{__propertys__:function(){this.TypeMsg={idCard:"身份证格式错误",num:"不是数字",email:"email格式错误",phone:"手机格式错误",chinese:"不是中文",password:"密码格式错误"},this.validatorArr={}},initialize:function($super,a){a=a||{},$super(a),this.requredMsg=a.requredMsg||"该项必填",this.rangeMsg=a.rangeMsg||"您输入的字符范围错误",this.regexMsg=a.regexMsg||"格式错误",this.compareMsg=a.compareMsg||"对比不成立",this.els=a.els||$(".formValidate"),this.msgPosition=a.msgPosition||"bottom",this.isShowMsg=a.isShowMsg||!1,this.init()},init:function(){for(var a=0,b=this.els.length;b>a;a++){var c=$(this.els[a]);this.initItem(c)}},initItem:function(el,insertType){var scope=this;"string"==typeof el&&(el=$("#"+el));var cfg=el.attr("data-cfg");if(!cfg||0==cfg.length)return!1;if(cfg=eval("("+cfg+")"),cfg.check!==!1&&(cfg.check=!0),insertType&&(cfg.check=!0),cfg.check===!1)return!1;cfg.id=el.attr("id")||"_"+Math.random(),cfg.el=el,cfg.validate=function(){scope.funcValidate(cfg)},this.validatorArr[cfg.id]=cfg;var s=""},validate:{requred:function(a){return""==a?!1:!0},regex:function(a,b){return b.test(a)?!0:!1},range:function(a,b){var c=b.split("|");return 3!=c.length?(0,!1):this["_"+c[0]](a,c[1],c[2])},_num:function(a,b,c){return a=parseInt(a),a>b&&c>a?!0:!1},_str:function(a,b,c){return a.length>b&&a.length<c?!0:!1},_date:function(){return!0},compare:function(a,b){var c=b.split("|");return 3!=c.length?(0,!1):this["_c"+c[0]](a,$("#"+c[1]).val(),c[2])},_cnum:function(a,b,c){if(a=parseInt(a),b=parseInt(b),"<"==c){if(b>a)return!0}else if("="==c){if(a==b)return!0}else if(">"==c&&a>b)return!0;return!1},_cstr:function(a,b,c){if(a=a.length,b=b.length,"<"==c){if(b>a)return!0}else if("="==c){if(a==b)return!0}else if(">"==c&&a>b)return!0;return!1},_cdate:function(){return!0}},funcValidate:function(a){if(void 0===this.validatorArr[a.id])return!1;var b=a.el.val()||a.el.html().replace(/(^\s*)|(\s*$)/g,""),c={};if(c.isPass=!0,c.el=a.el,c.id=a.id,c.errorItem={},this.validatorArr[a.id].check===!1)return this.validatorArr[a.id].result=c,!1;if(a.requred&&(c.errorItem.requred=this.validate.requred(b),c.errorItem.requred===!0?c.isPass=!0:(c.isPass=!1,c.msg=this.requredMsg)),c.isPass&&"string"==typeof a.type&&""!=b){var d=a.type;d="is"+d.substr(0,1).toUpperCase()+d.substr(1,d.length),c.errorItem[a.type]=validate[d](b),c.errorItem[a.type]===!0?c.isPass=!0:(c.isPass=!1,c.msg=this.TypeMsg[a.type]||"格式错误")}c.isPass&&a.regexObj&&""!=b&&(c.errorItem.regex=this.validate.regex(b,a.regexObj),c.errorItem.regex===!0?c.isPass=!0:(c.isPass=!1,c.msg=a.errorMsg||this.regexMsg)),c.isPass&&a.rangeObj&&""!=b&&(c.errorItem.range=this.validate.range(b,a.rangeObj),c.errorItem.range===!0?c.isPass=!0:(c.isPass=!1,c.msg=a.errorMsg||this.rangeMsg)),c.isPass&&a.compareObj&&""!=b&&(c.errorItem.compare=this.validate.compare(b,a.compareObj),c.errorItem.compare===!0?c.isPass=!0:(c.isPass=!1,c.msg=a.errorMsg||this.compareMsg)),this.validatorArr[a.id].result=c},showMsg:function(a){this.msgTimer&&clearTimeout(this.msgTimer);for(var b=$("body"),c=0,d=a.length;d>c;c++){var e=$("#"+a[c].id+"Tips");if(!e[0]){e=$('<div class="validateTips validateError" id="'+a[c].id+'Tips"><div class="triangle_icon"><div class="before"></div><div class="after"></div></div>'+a[c].msg+"</div>");var f=a[c].el.offset(),g=parseInt(a[c].el.height()),h=parseInt(a[c].el.width()),i=f.left,j=f.top;"bottom"==this.msgPosition?(e.addClass("posBottom"),j+=g+4):"right"==this.msgPosition?(e.addClass("posRight"),i+=h+6):"top"==this.msgPosition&&(e.addClass("posTop"),j+=-1*g-8),e.css({left:i,top:j}),b.append(e)}}this.msgTimer=setTimeout(function(){$(".validateTips").remove()},3e3)},validateAll:function(a,b,c){for(var d in this.validatorArr){var e=this.validatorArr[d];e.validate()}var f=this.getValidatorState();f===!0?"function"==typeof a&&a.call(c):(this.isShowMsg&&this.showMsg(f),"function"==typeof b&&b.call(c,f))},removeValidator:function(a){if(a&&this.validatorArr[a]){{this.validatorArr[a]}this.validatorArr[a].check=!1}},addValidator:function(a){"string"==typeof a&&(a=$("#"+a)),this.initItem(a,"add")},getValidatorState:function(){var a=!0,b=[];for(var c in this.validatorArr)0==this.validatorArr[c].result.isPass&&(a=!1,b.push(this.validatorArr[c].result));return a?!0:b}});WidgetFactory.register({name:WIDGET_NAME,fn:InputValidator})}}),define("cWidgetPublisher",["cUtility","cWidgetFactory","CommonStore"],function(a,b,c){"use strict";var d="Publisher",e=!1;if(!b.hasWidget(d)){var f=f||{},g={non_member_login:function(a){h.non_member_login=function(b){a.callback(b)}},locate:function(a){h.locate=function(b){try{var c=b;"string"==typeof b&&(c=JSON.parse(b)),a.success(c)}catch(d){a.error(!0,"定位失败")}}},login:function(a){h.login=function(b){"string"==typeof b&&(b=JSON.parse(b));{var d=c.UserStore.getInstance();d.getUser()}d.setUser(b.data);var e=c.HeadStore.getInstance(),f=e.get();f.auth=b.data.Auth,e.set(f),"function"==typeof a.success&&a.success()}},back:function(a){h.back=a.callback},commit:function(a){h.commit=a.callback}},h={refresh:function(){window.location.reload()}},i={non_member_login:function(a){"function"==typeof h.non_member_login&&h.non_member_login(a)},locate:function(a){"function"==typeof h.locate&&h.locate(a)},login:function(a){"function"==typeof h.login&&h.login(a)},back:function(){"function"==typeof h.back&&h.back()},commit:function(){"function"==typeof h.commit&&h.commit()}},j={callback:function(a){if(!e){var b=a;if("string"==typeof a)try{b=JSON.parse(window.decodeURIComponent(a))}catch(c){setTimeout(function(){0},0)}document.activeElement.blur(),"function"==typeof i[b.tagname]&&i[b.tagname](b.param)}}},k=function(a){for(var b in j)a[b]=a[b]||j[b]};f.setApi=function(){if(a.isInApp()){var b=window.app=window.app||{};k(b)}},f.register=function(b){a.isInApp()&&"function"==typeof g[b.name]&&g[b.name](b)},f.lock=function(){a.isInApp()&&(e=!0)},f.unlock=function(){a.isInApp()&&(e=!1)},f.requestEntryInfo=function(){a.isInApp()&&app_entry()},f.requestAnomyousUser=function(){a.isInApp()&&app_non_member_login()},f.monitor=function(b){a.isInApp()&&app_log_event(b)},f.sendHotelInfo=function(b,c,d,e){a.isInApp()&&app_go_to_hotel_detail(b,c,d,e)},f.requestAutoLogin=function(){a.isInApp()&&app_member_auto_login()},b.register({name:d,fn:f})}}),define("cWidgetAbstractCalendar",["cCoreInherit","cUIAbstractView","cWidgetFactory"],function(a,b,c){"user strict";var d="Abstract.Calendar";if(!c.hasWidget(d)){var e=new a.Class(b,{__propertys__:function(){this.CONSTANT={CALENDAR_CHINESE_LUNAR_INFO:[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835],CALENDAR_CHINESE_WEEKDAY:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],CALENDAR_CHINESE_NUMBER:["日","一","二","三","四","五","六","七","八","九","十"],CALENDAR_CHINESE_CARRT:["初","十","廿","卅","　"],CALENDAR_CHINESE_HOLIDAY:{1230:"除夕","0101":"初一","0115":"元宵","0505":"端午","0707":"七夕","0815":"中秋","0909":"重阳"},CALENDAR_COMMON_HOLIDAY:{"0101":"元旦","0214":"情人节","0501":"五一",1001:"国庆",1225:"圣诞节"},CALENDAR_WEEKDAY_NAME:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},CALENDAR_WEEKDAY_SHORTNAME:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},CALENDAR_WEEKDAY_SHORTNAME2:{0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"},CALENDAR_INIT_DATE:1,CALENDAR_MONTH:5,INIT_DATE_TIME:{H:0,M:0,S:0,MS:0},CALENDAR:"calendar"}},initialize:function($super,a){this.isLeapYear(this.startMonth.getFullYear())||this.isLeapYear(this.startMonth.getFullYear()-1)?(this.CONSTANT.CALENDAR_COMMON_HOLIDAY["0404"]="清明",delete this.CONSTANT.CALENDAR_COMMON_HOLIDAY["0405"]):(this.CONSTANT.CALENDAR_COMMON_HOLIDAY["0405"]="清明",delete this.CONSTANT.CALENDAR_COMMON_HOLIDAY["0404"]),$super(a)},setCalendarDate:function(a){this.dateObj="undefined"!==a?a:new Date,this.SY=this.dateObj.getFullYear(),this.SM=this.dateObj.getMonth(),this.SD=this.dateObj.getDate(),this.lunarInfo=this.CONSTANT.CALENDAR_CHINESE_LUNAR_INFO},leapMonth:function(a){return 15&this.lunarInfo[a-1900]},monthDays:function(a,b){return this.lunarInfo[a-1900]&65536>>b?30:29},leapDays:function(a){return this.leapMonth(a)?65536&this.lunarInfo[a-1900]?30:29:0},lYearDays:function(a){for(var b=348,c=32768;c>8;c>>=1)b+=this.lunarInfo[a-1900]&c?1:0;return b+this.leapDays(a)},Lunar:function(a){var b,c=0,d=0,e={},f=new Date(1900,0,31),g=(a-f)/864e5;for(e.dayCyl=g+40,e.monCyl=14,b=1900;2050>b&&g>0;b++)d=this.lYearDays(b),g-=d,e.monCyl+=12;for(0>g&&(g+=d,b--,e.monCyl-=12),e.year=b,e.yearCyl=b-1864,c=this.leapMonth(b),e.isLeap=!1,b=1;13>b&&g>0;b++)c>0&&b===c+1&&e.isLeap===!1?(--b,e.isLeap=!0,d=this.leapDays(e.year)):d=this.monthDays(e.year,b),e.isLeap===!0&&b===c+1&&(e.isLeap=!1),g-=d,e.isLeap===!1&&e.monCyl++;return 0===g&&c>0&&b===c+1&&(e.isLeap?e.isLeap=!1:(e.isLeap=!0,--b,--e.monCyl)),0>g&&(g+=d,--b,--e.monCyl),e.month=b,e.day=g+1,e},cDay:function(a,b){var c,d=this.CONSTANT.CALENDAR_CHINESE_NUMBER,e=this.CONSTANT.CALENDAR_CHINESE_CARRT;switch(c=a>10?"十"+d[a-10]:d[a],c+="月",b){case 10:c+="初十";break;case 20:c+="二十";break;case 30:c+="三十";break;default:c+=e[Math.floor(b/10)],c+=d[b%10]}return c},solarDay2:function(a){this.setCalendarDate(a);var b=new Date(this.SY,this.SM,this.SD),c=this.Lunar(b),d=(c.month>=10?c.month:"0"+c.month)+""+(c.day>=10?c.day:"0"+c.day);return c=null,d},weekday:function(){var a=this.CONSTANT.CALENDAR_CHINESE_WEEKDAY;return a[this.dateObj.getDay()]},YYMMDD:function(){var a=[this.SY,"年",this.SM+1,"月",this.SD,"日"];return a.join("")},_isDate:function(a){var b=Object.prototype.toString.call(a);return"[object Date]"===b},_objectKey:function(a){var b=[];if(a)for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},isLeapYear:function(a){return 0===a?!1:a%4!=0?!1:a%100==0&&a%400!=0?!1:!0}});c.register({name:d,fn:e})}}),define("cWidgetCalendar",["cCoreInherit","cUtility","cUIBase","cUIHashObserve","cWidgetFactory","cWidgetAbstractCalendar"],function(a,c,d,e,f){"user strict";var g="Calendar";if(!f.hasWidget(g)){var h=f.create("Abstract.Calendar"),j=new a.Class(h,{__propertys__:function(){this.chineseHoliday=this.CONSTANT.CALENDAR_CHINESE_HOLIDAY,this.holiday=this.CONSTANT.CALENDAR_COMMON_HOLIDAY,this.DAYTITLE=this.CONSTANT.CALENDAR_WEEKDAY_SHORTNAME,this.SDAYTITLE=this.CONSTANT.CALENDAR_WEEKDAY_SHORTNAME2,this.DAYTITLE2=this.CONSTANT.CALENDAR_WEEKDAY_NAME,this.addClass(d.config.prefix+this.CONSTANT.CALENDAR),this.startMonth=c.getServerDate(),this.startMonth.setDate(this.CONSTANT.CALENDAR_INIT_DATE),this.Months=this.CONSTANT.CALENDAR_MONTH,this.validStartDate=c.getServerDate(),this.validStartDate.setHours(this.CONSTANT.INIT_DATE_TIME.H,this.CONSTANT.INIT_DATE_TIME.M,this.CONSTANT.INIT_DATE_TIME.S,this.CONSTANT.INIT_DATE_TIME.MS),this.validEndDate,this.date,this.dateVal={},this.titledom,this.leftback,this.cls=[this.CONSTANT.CALENDAR],this.title,this.noabsolute=!1,this.curDate,this.dateDoms={},this._chineseHoliday={},this.html,this.clickEnabled=!0,this.msg="",this.callback=function(){},this.hashObserve=new e({hash:this.id,callback:function(){this._hide()},scope:this}),this.animatSwitch=!1,this.timeNum=250},initialize:function($super,a){this.setOption(function(a,b){switch(a){case"Months":case"timeNum":case"date":case"curDate":case"root":case"callback":case"title":case"noabsolute":case"msg":case"clickEnabled":case"animatSwitch":this[a]=b;break;case"cls":this.cls.push(b);break;case"validStartDate":case"validEndDate":this[a]=b,this[a].setHours(0,0,0,0);break;case"startMonth":this[a]=b,this[a].setDate(1)}}),$super(a),this.buildEvent()},selectedDate:function(){var a;for(var b in this.date)a=this.root.find("."+this.buildSelectCls(b))[0],this.dateDoms[b]=a,this.dateVal[b]=this.date[b].value;!this.curDate&&(this.curDate=b)},buildEvent:function(){this.addEvent("onCreate",this.onCreate),this.addEvent("onShow",this.onShow),this.addEvent("onHide",this.onHide)},buildElement:function(){this.titledom=this.root.find("header"),this.leftback=this.root.find("#js_return")},onCreate:function(){this.selectedDate(),this.buildElement(),this.buildElementsEvent(),this.noabsolute||this.root.css({position:"absolute"}),this.windowResizeHander=$.proxy(this.position,this)},onShow:function(){if(this.root.css({top:0,left:0,width:"100%"}),$(window).bind("resize",this.windowResizeHander),this.setzIndexTop(),this.hashObserve.start(),this.animatSwitch){var a=this;window.scrollTo(0,0),this.root.animate({"-webkit-transform":"translate(100%, 0px) translateZ(0px)",top:"0px"},0,function(){a.root.animate({"-webkit-transform":"translate(0px, 0px) translateZ(0px)"},a.timeNum,function(){a.windowResizeHander()})})}},position:function(){this.root.css({left:"0px",top:"0px"});var a=d.getPageSize();this.root.css({width:$(window).width(),height:a.height})},onHide:function(){$(window).unbind("resize",this.windowResizeHander),this.hashObserve.end()},createHtml:function(){return this.createCalendar()},buildElementsEvent:function(){var a=this;this.clickEnabled&&this.root.delegate(".cui_cld_daybox li","click",function(){b=$(this),b.hasClass("valid")||(b=b.closest(".valid"));var d=b.attr("data-date");d&&(d=c.Date.parse(d).valueOf(),a.isAccordBound(d)&&a._setDate(d,b))}),this.root.delegate("#js_return","click",$.proxy(function(){this._hide()},this))},_hide:function(){if(this.animatSwitch){var a=this;this.root.animate({"-webkit-transform":"translate(0px, 0px) translateZ(0px)",top:"0px"},0,function(){a.root.animate({"-webkit-transform":"translate(100%, 0px) translateZ(0px)"},a.timeNum,function(){a.hide()})})}else this.hide()},isAccordBound:function(a){var b=this.date[this.curDate];if(!b.bound)return!0;if(!b.bound.rules||!b.bound.error)return!0;var c,d=b.bound.rules;for(var e in d)if(c="string"==typeof d[e]?this.dateVal[d[e]]:this._isDate(d[e])&&d[e],a.setHours(0,0,0,0),c)switch(c.setHours(0,0,0,0),e){case"<":if(!(c>a))return b.bound.error.call(this,a,this.curDate,this.dateVal),!1;break;case">":if(!(a>c))return b.bound.error.call(this,a,this.curDate,this.dateVal),!1;break;case"<=":if(!(c>=a))return b.bound.error.call(this,a,this.curDate,this.dateVal),!1;break;case">=":if(!(a>=c))return b.bound.error.call(this,a,this.curDate,this.dateVal),!1}return!0},_setDate:function(a,b){var d=this.root.find("."+this.buildSelectCls(this.curDate));d.each($.proxy(function(a,b){var e=$(b);e.html(this.formatTitle(c.Date.parse(d.attr("data-date")).valueOf())),e.removeClass(this.buildSelectCls(this.curDate)),e.removeClass(this.buildSelectCls())},this)),this.dateDoms[this.curDate]=b;var e,f=$(b),g=this.date[this.curDate].title;e="function"==typeof g?this.formatTitle2(g):this.formatTitle,f.html(e.call(this,a)),f.removeClass("cui_cld_dayfuture"),f.removeClass("cui_cld_day_hint"),f.addClass("cui_cld_day_havetxt"),f.addClass(this.buildSelectCls(this.curDate)),f.addClass(this.buildSelectCls()),this.dateVal[this.curDate]=a,this.callback&&this.callback.call(this,a,this.curDate,this.dateVal,this.getDateInfo(a),this.calendarend)},setCurDate:function(a){this.curDate=a,this.create();var b=this.getCurTitle();this.titledom.html(b)},getEndDate:function(){return this.calendarend},buildSelectCls:function(a){return a?"selected-"+a:"cui_cld_daycrt"},getCurTitle:function(){var a=this.date[this.curDate],b="";return a&&(b=a.headtitle||this.title),b||this.title},createCalendar:function(){var a,b=[],d=this.getCurTitle(),e=c.isInApp(),f=e?' style=" margin-top: 0"':"";this.title&&!e&&b.push(["<header>","<h1>"+d+'</h1><i class="returnico i_bef" id="js_return"></i>',"</header>"].join("")),b.push(['<article class="cont_wrap"',f,'><div class="cui_cldwrap">'].join("")),b.push(this.createWeek(e));for(var g=0;g<this.Months;g++)a=new Date(this.startMonth),a.setMonth(a.getMonth()+g),b.push(this.createMonth(a));return b.push(["</div></atricle>"].join("")),b.join("")},createWeek:function(a){var b=a?" cui_cldweek_top0":"",c=['<ul class="cui_cldweek'+b+'">'];this.msg&&c.push('<p  class="cui_cldmsg">'+this.msg+"</p>");for(i in this.SDAYTITLE)c.push("<li>"+this.SDAYTITLE[i]+"</li>");return c.push("</ul>"),c.join("")},createMonth:function(a){var b,d=this.calcStructData(a),e=[];e.push('<section class="cui_cldunit">'),e.push('<h1 class="cui_cldmonth">'+c.Date.format(a,"Y年n月")+"</h1>"),e.push('<ul class="cui_cld_daybox">');for(var f,g,h=d.days.length,b=0;h>b;b++){g=d.days[b].length;for(var i=0;g>i;i++){f={};var j=d.days[b][i];if(j){var k=this.validStartDate||d.start,l=this.validEndDate||d.end;j>=k&&l>=j?f.valid=!0:(f.cui_cld_daypass=!0,f.invalid=!0)}else f.cui_cld_dayfuture=!0,f.invalid=!0;var m,n=this.getDateInfo(j);if(n?(m=n.daytitle||n.holiday||n.chineseday,m?(f.cui_cld_day_havetxt=!0,(n.holiday||n.chineseday)&&(f.cui_cld_day_hint=!0),m="<em>"+n.date+"</em><i>"+m+"</i>"):m="<em>"+n.date+"</em>"):m="",this.date)for(var o in this.date)j&&c.Date.format(this.dateVal[o]||this.date[o].value,"Y-m-d")==c.Date.format(j,"Y-m-d")&&(delete f.cui_cld_dayfuture,delete f.cui_cld_day_hint,f.cui_cld_day_havetxt=!0,f[this.buildSelectCls()]=!0,f[this.buildSelectCls(o)]=!0,m=this.date[o].title(j,function(){return n.daytitle||n.holiday||n.chineseday||n.date}),m="<em>"+m+"</em>");e.push('<li data-date="'+c.Date.format(j,"Y-m-d")+'" '+(f?' class="'+this._objectKey(f).join(" ")+'"':"")+">"+m+"</li>")}}return e.push("</ul></section>"),e.join("")},formatTitle:function(a){if(a){var b=this.getDateInfo(a);return b.holiday||b.chineseday||b.daytitle||b.date}return""},getDateInfo:function(a){if(a){var b=c.getServerDate(),d=new Date(a);d.setHours(1,1,1,0),b.setHours(1,1,1,0);var e=(d-b)/864e5,f={};f.daytitle=c.Date.format(b,"Ymd")==c.Date.format(a,"Ymd")?"今天":1==e?"明天":2==e?"后天":"";var g=this.solarDay2(a);this.chineseHoliday[g]&&!this._chineseHoliday[g]?(this._chineseHoliday[g]=1,f.chineseday=this.chineseHoliday[g]):f.chineseday="";var h=c.Date.format(a,"md");return f.holiday=this.holiday[h]?this.holiday[h]:"",f.week=this.DAYTITLE[a.getDay()],f.week2=this.DAYTITLE2[a.getDay()],f.date=c.Date.format(a,"j"),f}},formatTitle2:function(a){return $.proxy(function(b){return a(b,$.proxy(function(a){return this.formatTitle(a)},this))},this)},calcStructData:function(a){var b=new Date(a),c=new Date(a);b.setDate(1),b.setHours(0,0,0,0);var d=b.getDay();c.setMonth(c.getMonth()+1,1),c.setHours(-24,0,0,0);for(var e,f=c.getDay(),g=(c.getDate()+(d+(6-f)))/7,h=[],i=0,j=0;g>i;i++){h[i]=[];for(var k=0;7>k;k++)if(0==i&&d>k)h[i].push("");else{if(e=new Date(b),e.setDate(e.getDate()+j),e>c)break;h[i].push(e),j++}}return this.calendarend=c,{start:b,end:c,days:h,loops:g}},setDate:function(a){this.create();for(var b in a)if(this.date[b]&&this._isDate(a[b])){a[b].setHours(0,0,0,0),this.date[b].value=a[b],this.dateVal[b]=a[b];var d=this.root.find("."+this.buildSelectCls(b));if(d.length){var e=c.Date.parse(d.data("date")).valueOf();d.removeClass(this.buildSelectCls(b)),d.removeClass(this.buildSelectCls()),d.html(this.formatTitle(e))}var f=this.root.find('[data-date="'+c.Date.format(a[b],"Y-m-d")+'"]');f.each($.proxy(function(c,d){d=$(d),d.hasClass("valid")&&(d.addClass(this.buildSelectCls(b)),d.addClass(this.buildSelectCls()),d.html(this.formatTitle2(this.date[b].title)(a[b])))},this)),this.dateDoms[b]=f}},addDate:function(a,b){this.create();var d,e,f;for(var g in a)if(!this.date[g]||b){this.date[g]=a[g],d=this.date[g]&&this.date[g].value,e=this.date[g]&&this.date[g].title,e="function"==typeof e?this.formatTitle2(e):$.proxy(this.formatTitle,this);var h=this.root.find("."+this.buildSelectCls(g));h.length&&(h.removeClass(this.buildSelectCls(g)),h.removeClass(this.buildSelectCls())),d&&(f=this.root.find('[data-date="'+c.Date.format(d,"Y-m-d")+'"]'),f.each($.proxy(function(a,b){b=$(b),b.hasClass("valid")&&(b.html(e(d)),b.addClass(this.buildSelectCls(g)),b.addClass(this.buildSelectCls()),this.dateVal[g]=d)},this)))}},removeDate:function(a){this.create();for(var b,d=0,e=a.length;e>d;d++)if(b=a[d],this.date[b]){var f=this.root.find("."+this.buildSelectCls(b));f.each($.proxy(function(a,d){var e=$(d);e.removeClass(this.buildSelectCls(b)),e.removeClass(this.buildSelectCls()),e.html(this.formatTitle(c.Date.parse(e.data("date")).valueOf()))},this)),delete this.date[b],delete this.dateVal[b]}},getDate:function(){var a={};for(var b in this.date)a[b]=this.date[b].value;return _.isEmpty(this.dateVal)?_.isEmpty(a)?{}:a:this.dateVal},update:function(a){this.setOption(function(a,b){switch(a){case"Months":case"date":case"curDate":case"root":case"callback":case"title":case"noabsolute":this[a]=b;break;case"cls":this.cls.push(b);break;case"validStartDate":case"validEndDate":this[a]=b,this[a].setHours(0,0,0,0);break;case"startMonth":this[a]=b,this[a].setDate(1)}}),this.readOption(a),this._chineseHoliday={},this.create(),this.root.html(this.createCalendar()),this.trigger("onChange")}});f.register({name:g,fn:j})}}),define("cWidgetCalendarPrice",["cCoreInherit","cUtility","cUIBase","cWidgetFactory","cWidgetAbstractCalendar","cWidgetGuider"],function(a,c,d,e){"user strict";var f="Calendar.Price",g=0;if(!e.hasWidget(f)){var h=e.create("Guider"),j=e.create("Abstract.Calendar"),k=new a.Class(j,{__propertys__:function(){this.chineseHoliday=this.CONSTANT.CALENDAR_CHINESE_HOLIDAY,this.holiday=this.CONSTANT.CALENDAR_COMMON_HOLIDAY,this.DAYTITLE=this.CONSTANT.CALENDAR_WEEKDAY_SHORTNAME,this.SDAYTITLE=this.CONSTANT.CALENDAR_WEEKDAY_SHORTNAME2,this.addClass(d.config.prefix+this.CONSTANT.CALENDAR),this.showChineseHoliday=!0,this.showHoliday=!0,this.startMonth=c.getServerDate(),this.startMonth.setDate(this.CONSTANT.CALENDAR_INIT_DATE),this.Months=this.CONSTANT.CALENDAR_MONTH,this.validStartDate=c.getServerDate(),this.validStartDate.setHours(this.CONSTANT.INIT_DATE_TIME.H,this.CONSTANT.INIT_DATE_TIME.M,this.CONSTANT.INIT_DATE_TIME.S,this.CONSTANT.INIT_DATE_TIME.MS),this.validEndDate,this.date,this.onlyread=!1,this.dateVal={},this.cls=[this.CONSTANT.CALENDAR],this.curDate,this.dateDoms={},this.html,this.windowResizeHander,this.animatSwitch=!1,this.lowerPriceClass="",this.holidayClass="",this.todayClass="",this.lowestpriceMap={},this._chineseHoliday={},this._formatPrice=function(a,b){return b(a)},this.callback=function(){},this.title=!1,this.returnCallback=function(){}},initialize:function($super,a){this.setOption(function(a,b){switch(a){case"Months":case"curDate":case"root":case"callback":case"onlyread":case"title":case"returnCallback":case"showChineseHoliday":case"animatSwitch":case"lowerPriceClass":case"holidayClass":case"todayClass":this[a]=b;break;case"date":if(b)for(var c in b)this.dateVal[c]=b[c].value;this[a]=b;break;case"formatPrice":this._formatPrice=b;break;case"showHoliday":this[a]=b;break;case"validDates":this[a]=b;break;case"cls":this.cls.push(b);break;case"validStartDate":case"validEndDate":this[a]=b,this[a].setHours(1,1,1,0);
break;case"startMonth":this[a]=b,this[a].setDate(1)}}),$super(a),this.buildEvent(),this.lowerPriceClass&&this.validDates&&this.sortMonthPrice()},sortMonthPrice:function(){this.lowestpriceMap={};var a=this;$.each(this.validDates,function(b){var c=a.validDates[b].date;return"undefined"==typeof a.lowestpriceMap[c.getFullYear().toString()+c.getMonth().toString()]?void(a.lowestpriceMap[c.getFullYear().toString()+c.getMonth().toString()]=a.validDates[b].price):a.lowestpriceMap[c.getFullYear().toString()+c.getMonth().toString()]>a.validDates[b].price?void(a.lowestpriceMap[c.getFullYear().toString()+c.getMonth().toString()]=a.validDates[b].price):void 0})},selectedDate:function(){var a;for(var b in this.date)a=this.root.find("."+this.buildSelectCls(b))[0],this.dateDoms[b]=a,this.dateVal[b]=this.date[b].value;!this.curDate&&(this.curDate=b)},buildEvent:function(){this.addEvent("onCreate",this.onCreate),this.addEvent("onShow",this.onShow),this.addEvent("onHide",this.onHide)},onCreate:function(){this.selectedDate(),this.buildElementsEvent(),this.root.css({position:"absolute"}),this.windowResizeHander=$.proxy(this.position,this)},onShow:function(){$(window).bind("resize",this.windowResizeHander),this.root.css("z-index","1000"),this.windowResizeHander(),setTimeout(this.windowResizeHander,100);var a=this;if(h.apply({hybridCallback:function(){a.root.find(".cui_cldweek").css("top","0")},callback:function(){}}),this.animatSwitch){var a=this;window.scrollTo(0,0),this.root.animate({"-webkit-transform":"translate(100%, 0px) translateZ(0px)",top:"0px"},0,function(){a.root.animate({"-webkit-transform":"translate(0px, 0px) translateZ(0px)"},a.timeNum,function(){a.windowResizeHander()})})}},position:function(){this.root.css({left:"0px",top:"0px"});var a=d.getPageSize();this.root.css({width:$(window).width(),height:a.height})},onHide:function(){$(window).unbind("resize",this.windowResizeHander)},createHtml:function(){return this.createCalendar()},buildElementsEvent:function(){var a=this;this.root.delegate("li.valid","click",function(){b=$(this),b.hasClass("valid")||(b=b.closest(".valid"));var d=c.Date.parse(b.attr("data-date")).valueOf();a.isAccordBound(d)&&a._setDate(d,b)}),this.root.delegate("#js_return","click",$.proxy(function(){this.returnCallback&&this.returnCallback(),this.hide()},this))},_hide:function(){if(this.animatSwitch){var a=this;this.root.animate({"-webkit-transform":"translate(0px, 0px) translateZ(0px)",top:"0px"},0,function(){a.root.animate({"-webkit-transform":"translate(100%, 0px) translateZ(0px)"},a.timeNum,function(){a.hide()})})}else this.hide()},isAccordBound:function(a){var b=this.date[this.curDate];if(!b.bound)return!0;if(!b.bound.rules||!b.bound.error)return!0;var c,d=b.bound.rules;for(var e in d)switch(c="string"==typeof d[e]?this.dateVal[d[e]]:this._isDate(d[e])&&d[e],e){case"<":if(!(c>a))return b.bound.error.call(this,a,this.curDate,this.dateVal),!1;break;case">":if(!(a>c))return b.bound.error.call(this,a,this.curDate,this.dateVal),!1;break;case"<=":if(!(c>=a))return b.bound.error.call(this,a,this.curDate,this.dateVal),!1;break;case">=":if(!(a>=c))return b.bound.error.call(this,a,this.curDate,this.dateVal),!1}return!0},_setDate:function(a,b){if(!this.onlyread){if(this.dateDoms[this.curDate]){var c=$(this.dateDoms[this.curDate]);c.removeClass(this.buildSelectCls(this.curDate)),c.removeClass(this.buildSelectCls())}this.dateDoms[this.curDate]=b;var d,e=$(b),f=this,g=this.date[this.curDate].title;d="function"==typeof g?function(a){return g(a,function(a){return f.formatTitle(a)})}:this.formatTitle;{var h=parseFloat(parseInt(100*(b.attr("data-price")||0))/100);$.proxy(this.formatPrice,this)}e.addClass(this.buildSelectCls(this.curDate)),e.addClass(this.buildSelectCls()),this.dateVal[this.curDate]=a;var i=($.grep(this.validDates,function(b){var c=b.date.valueOf()==a.valueOf();return c}),e.html().replace(/^\d+/gm,""));isNaN(i)===!1&&(i=this.DAYTITLE[a.getDay()]),this.callback&&this.callback.call(this,a,h,i,this.dateVal)}},setCurDate:function(a){this.curDate=a},buildSelectCls:function(a){return a?"selected-"+a:"cui_cld_daycrt"},createCalendar:function(){var a,b=[];this.title&&b.push(["<header>","<h1>"+this.title+'</h1><i class="returnico i_bef" id="js_return"></i>',"</header>"].join("")),b.push(['<article class="cont_wrap" style="margin: 0 0 0">','<div class="cui_cldwrap">'].join("")),b.push(this.createWeek());for(var c=0;c<this.Months;c++)a=new Date(this.startMonth),a.setMonth(a.getMonth()+c),b.push(this.createMonth(a));return b.push(["</div></atricle>"].join("")),b.join("")},createWeek:function(){var a=['<ul class="cui_cldweek">'];for(i in this.SDAYTITLE)a.push("<li>"+this.SDAYTITLE[i]+"</li>");return a.push("</ul>"),a.join("")},createMonth:function(a){var b,d=this.calcStructData(a),e=[];e.push('<section class="cui_cldunit">'),e.push('<h1 class="cui_cldmonth">'+c.Date.format(a,"Y年n月")+"</h1>"),e.push('<ul class="cui_cld_daybox">');var f,h,i=d.days.length,j=this;0;for(var b=0;i>b;b++){h=d.days[b].length;for(var k=0;h>k;k++){g++,f={};var l=d.days[b][k];if(l){var m=this.validStartDate||d.start,n=this.validEndDate||d.end;l>=m&&n>=l?(f.cui_cld_dayfuture=!0,f.valid=!0):(f.cui_cld_daypass=!0,f.invalid=!0)}else f.cui_cld_dayfuture=!0,f.invalid=!0;var o="",p="";if(this.validDates&&l){var q=$.grep(this.validDates,function(a){return a.date.getFullYear()===l.getFullYear()&&a.date.getMonth()===l.getMonth()&&a.date.getDate()===l.getDate()?!0:!1});0===q.length?(delete f.valid,f.invalid=!0):(f.cui_cld_day_havetxt=!0,o=q[0].price,p=l.getFullYear().toString()+l.getMonth().toString())}var r=this.formatTitle;if(this.date)for(var s in this.date)this.dateVal[s]&&f.valid&&c.Date.format(this.dateVal[s]||this.date[s].value,"Y-m-d")==c.Date.format(d.days[b][k],"Y-m-d")&&(delete f.cui_cld_dayfuture,delete f.cui_cld_day_hint,f[this.buildSelectCls()]=!0,f[this.buildSelectCls(s)]=!0,r=function(a){return function(b){return a(b,function(a){return j.formatTitle(a)})}}(this.date[s].title));var t=$.proxy(this.formatPrice,this),u=this._formatPrice(o,t,!!f.valid);o&&this.lowerPriceClass&&p&&this.lowestpriceMap[p]===o&&(u=u.split("<i>").join('<i class="'+this.lowerPriceClass+'">'));var v=r.call(this,l);if(l&&v!=l.getDate()){var w=c.getServerDate(),x=new Date(l);x.setHours(1,1,1,0),w.setHours(1,1,1,0);var y=(x-w)/864e5;v=2>=y?'<em class="'+this.todayClass+'">'+v+"</em>":this.holidayClass?'<em class="'+this.holidayClass+'">'+v+"</em>":"<em>"+v+"</em>"}else v="<em>"+v+"</em>";e.push('<li data-price="'+o+'" data-date="'+c.Date.format(l,"Y-m-d")+'" '+(f?' class="'+this._objectKey(f).join(" ")+'"':"")+">"+v+u+"</li>")}}return e.push("</ul></section>"),e.join("")},formatPrice:function(a){return a>0?"<i>&yen;"+a+"</i>":""},formatTitle:function(a){if(!a)return"";var b=c.getServerDate();if(c.Date.format(b,"Ymd")==c.Date.format(a,"Ymd"))return"今天";var d=new Date(a);d.setHours(1,1,1,0),b.setHours(1,1,1,0);var e=(d-b)/864e5;if(1==e)return"明天";if(2==e)return"后天";if(this.showChineseHoliday===!0){var f=this.solarDay2(a);if(this.chineseHoliday[f]&&!this._chineseHoliday[f])return this._chineseHoliday[f]=1,this.chineseHoliday[f]}if(1==this.showHoliday){var g=c.Date.format(a,"md");if(this.holiday[g])return this.holiday[g]}return c.Date.format(a,"j")},calcStructData:function(a){var b=new Date(a),c=new Date(a);b.setDate(1),b.setHours(0,0,0,0);var d=b.getDay();c.setMonth(c.getMonth()+1,1),c.setHours(-24,0,0,0);for(var e,f=c.getDay(),g=(c.getDate()+(d+(6-f)))/7,h=[],i=0,j=0;g>i;i++){h[i]=[];for(var k=0;7>k;k++)if(0==i&&d>k)h[i].push("");else{if(e=new Date(b),e.setDate(e.getDate()+j),e>c)break;h[i].push(e),j++}}return{start:b,end:c,days:h,loops:g}},setDate:function(a){for(var b in a)if(this.date[b]&&this._isDate(a[b])){a[b].setHours(1,1,1,0),this.date[b].value=a[b],this.dateVal[b]=a[b];var d=$(this.dateDoms[b]);d.removeCls(this.buildSelectCls(b)),d.removeCls(this.buildSelectCls());var e=$(this.root.query('[data-date="'+c.Date.format(a[b],"Y-m-d")+'"]')[0]);e.hasClass("valid")&&(e.addClass(this.buildSelectCls(b)),e.addClass(this.buildSelectCls())),this.dateDoms[b]=e}},getDate:function(){return this.dateVal}});e.register({name:f,fn:k})}}),define("cWidgetSlide",["cBase","cUICore","cWidgetFactory","libs"],function(a,b,c){"use strict";var d="Slide";if(!c.hasWidget(d)){var e=0,f=new a.Class({__propertys__:function(){this.images=[],this.index=1,this.delay=3,this.defaultIndex,this.autoplay=!1,this.root,this.imageinter,this.imageouter,this.navbox,this.navs,this.navinter,this.container,this.interWidth,this.itemWidth,this.onchange=function(){},this.onerror=function(){},this.loop=!0,this.ENUM_STATE_EMPTY=0,this.ENUM_STATE_NOTEMPTY=1,this.state=this.ENUM_STATE_EMPTY,this.notimage="",this.notimagedom,this.setTimeoutResoure,this.isMove=!1,this.isadaptive=!1,this.dirs={left:"next",right:"pre"},this.dir="left",this.startX=0,this.startY=0},initialize:function(a){this.setOption(a),this.createLayout(),this.addImageItems();var c=function(){this.calcinterWidth(),this.state===this.ENUM_STATE_NOTEMPTY&&(this.initposition(),this.autoplay&&this.play(),this.images&&this.images.length>1&&this.buildEvent())};setTimeout($.proxy(c,this),0);var d=this;this.isadaptive&&$(window).on("resize",function(){d.calcinterWidth(),d.initposition();var a=0;$("."+b.config.prefix+"slide-img-item img").each(function(b,c){$(c).height()>a&&(a=$(c).height())}),d.imageinter.height(a),d.imageouter.height(a),d.container.height(a)})},setOption:function(a){for(var b in a)switch(b){case"autoplay":case"defaultIndex":case"container":case"notimage":case"delay":case"dir":case"loop":case"onchange":case"onerror":case"isadaptive":this[b]=a[b];break;case"images":if(a[b]&&"string"==typeof a[b][0]){for(var c=[],d=0,e=a[b].length;e>d;d++)c.push({src:a[b][d]});this[b]=c}else this[b]=a[b]}},calcinterWidth:function(){var a=this.imageinter.find("."+b.config.prefix+"slide-img-item"),c=0;this.interWidth=c,this.itemWidth=this.imageouter.width(),a.css("width",this.itemWidth+"px"),a.each(function(){c+=$(this).width()}),this.imageinter.css("width",c+"px")},createLayout:function(){this.root=$(['<div class="'+b.config.prefix+'slide">','<div class="'+b.config.prefix+'slide-imgsouter">','<div class="'+b.config.prefix+'slide-imgsinter">',"</div>","</div>",'<div class="'+b.config.prefix+'slide-nav">','<div class="'+b.config.prefix+'slide-nav-padding">',"</div>","</div>","</div>"].join("")),this.imageouter=this.root.find("."+b.config.prefix+"slide-imgsouter"),this.imageinter=this.root.find("."+b.config.prefix+"slide-imgsinter"),this.navbox=this.root.find("."+b.config.prefix+"slide-nav"),this.navinter=this.root.find("."+b.config.prefix+"slide-nav-padding"),this.isadaptive&&this.container.height(e),this.container.empty().append(this.root)},createImageItem:function(a,c,d){var e=[b.config.prefix+"slide-img-item"];c&&e.push(b.config.prefix+"slide-img-item-current"),d&&[].push.call(e,d);var f=$(['<div class="'+e.join(" ")+'">','<a href="'+(a.link?a.link:"javascript:void(0);")+'"><img src="'+a.src+'" title="'+(a.title||"")+'"/></a>',"</div>"].join("")),g=this;return f.find("img").bind("error",function(){var a=this;setTimeout(function(){g.notimage&&(a.src=g.notimage),g.onerror&&g.onerror(a),$(a).unbind("error")},100)}),f},addImageItems:function(){for(var a=0,c=this.images.length;c>a;a++)this.addItem(this.images[a],this.defaultIndex===a);var d,e;if(this.images.length){if(this.state=this.ENUM_STATE_NOTEMPTY,d=this.createImageItem(this.images[0],null,[b.config.prefix+"slide-img-pre"]),e=this.createImageItem(this.images[Math.max(0,this.images.length-1)],null,[b.config.prefix+"slide-img-last"]),this.loop||(d.css({visibility:"hidden"}),e.css({visibility:"hidden"})),this.isadaptive){var f=this,g=d.find("img");g.on("load",function(){f.container.height(g.height())})}this.imageinter.append(d),this.imageinter.prepend(e),this.navs=this.navinter.find("."+b.config.prefix+"slide-nav-item")}else this.state=this.ENUM_STATE_EMPTY,this.addEmptyItem(this.notimage)},initposition:function(){this.go(this.index,function(){},!0),this.onchange(this.index,this.index);var a=this.calcNextIndex();this.setNavCurrent(a)},addEmptyItem:function(a){var c=[b.config.prefix+"slide-img-item",b.config.prefix+"slide-img-item-empey"];this.notimagedom=$('<div class="'+c.join(" ")+'"></div>'),this.notimagedom.append(a),this.imageinter.append(this.notimagedom)},buildEvent:function(){this.imageouter.bind("touchstart",$.proxy(this.onTouchStart,this)),this.imageouter.bind("touchmove",$.proxy(this.onTouchMove,this)),this.imageouter.bind("touchend",$.proxy(this.onTouchEnd,this)),this.imageouter.bind("touchcancel",$.proxy(this.onTouchEnd,this))},onTouchStart:function(a){if(a.preventDefault(),this.isMove)return void(this.isTouchStart=!1);this.isTouchStart=!0;var c=b.Tools.getMousePosOfElement(a.targetTouches[0],a.currentTarget);this.stop(),this.startX=c.x,this.startY=c.y,this.imageinterLeft=parseInt(this.imageinter.css("left"))},onTouchMove:function(a){if(a.preventDefault(),!this.isMove&&this.isTouchStart){{var c=b.Tools.getMousePosOfElement(a.targetTouches[0],a.currentTarget),d=c.x-this.startX;c.y-this.startY}this.imageinter.css("left",this.imageinterLeft+d+"px")}},onTouchEnd:function(a){if(a.preventDefault(),!this.isMove&&this.isTouchStart){var c=b.Tools.getMousePosOfElement(a.changedTouches[0],a.currentTarget),d=c.x-this.startX,e=(c.y-this.startY,$.proxy(function(){this.autoplay&&this.loop&&this.play()},this)),f=this.calcNextIndex()+1,g=this.images.length;d>50&&this.loop||d>50&&!this.loop&&1!==f?this.pre(e):-50>d&&this.loop||-50>d&&!this.loop&&g>f?this.next(e):this.imageinter.animate({left:this.imageinterLeft+"px"},null,e)}},createNavItem:function(a){return $(['<span class="'+b.config.prefix+"slide-nav-item"+(a?b.config.prefix+"slide-nav-item-current":"")+'"></span>'].join(""))},addItem:function(a,b){var c=this.createImageItem(a,b),d=this.createNavItem(b);this.imageinter.append(c),this.navinter.append(d)},play:function(){clearInterval(this.setTimeoutResoure),!this.images||this.images.length<2||(this.setTimeoutResoure=setInterval($.proxy(function(){this[this.dirs[this.dir]]()},this),1e3*this.delay))},stop:function(){clearInterval(this.setTimeoutResoure)},go:function(a,b,c){this.isMove=!0;var d=-(this.itemWidth*a);c?(this.imageinter.css({left:d+"px"}),this.isMove=!1,b&&b()):this.imageinter.animate({left:d+"px"},null,null,$.proxy(function(){this.isMove=!1,b&&b()},this))},next:function(a){var b=this.index;this.go(++this.index,$.proxy(function(){if(this.index===this.images.length+1){this.index=1;var c=-(this.itemWidth*this.index);this.imageinter.css({left:c+"px"})}var d=this.calcNextIndex();this.setNavCurrent(d),this.onchange(this.index,b),a&&a()},this))},setNavCurrent:function(a){this.navs.removeClass(b.config.prefix+"slide-nav-item-current"),$(this.navs.get(a)).addClass(b.config.prefix+"slide-nav-item-current")},calcNextIndex:function(){return this.index>this.images.length?0:this.index-1},pre:function(a){0==this.index&&(this.index=1);var b=this.index;this.go(--this.index,$.proxy(function(){if(0===this.index){this.index=this.images.length;var c=-(this.itemWidth*this.index);this.imageinter.css({left:c+"px"})}var d=this.calcPreIndex();this.setNavCurrent(d),this.onchange(this.index,b),a&&a()},this))},calcPreIndex:function(){return this.index<1?Math.max(0,this.images.length-1):this.index-1},empty:function(){this.stop(),this.imageinter.find("img").remove()}});c.register({name:d,fn:f})}}),define("cWidgetCaptcha",["cWidgetFactory","cStorage","c"],function(a,b,c){"use strict";var d="Captcha",e=function(){};e={islock:!1,getCode:function(a,b){var d=this;if(!d.islock){b.showLoading(),this.islock=!0;a.excute(function(a){if(b.hideLoading(),d.islock=!1,0==a.rc)d.islock=!0,d.showtime(b.els.sendcodebtn);else if(2==a.rc){a.rmsg="很抱歉，您的验证次数已达上限，请明天再试";var e=new c.ui.Alert({message:a.rmsg,buttons:[{text:"确定",click:function(){this.hide();for(var a in b.els){var c=b.els[a][0];c&&"INPUT"==c.nodeName&&!c.disabled&&(c.value="")}}}]});e.show()}else a.rmsg=a.rmsg||"获取验证码失败，请重试",b.showToast(a.rmsg)},function(){d.islock=!1,b.hideLoading(),b.showToast("获取验证码失败，请重试")})}},showtime:function(a){var b=60,c=this;if(c.islock)var d=setInterval(function(){a.addClass("cgrey"),a.removeClass("cblue1"),a.text(b+"秒后重发"),(0>=b||!c.islock)&&(clearInterval(d),a.removeClass("cgrey"),a.addClass("cblue1"),a.text("免费获取"),c.islock=!1),b--},1e3)},setinit:function(){this.islock=!1}},a.register({name:d,fn:e})}),define("cBasePageView",["cPageView"],function(a){return a}),define("cCommonPageFactory",["libs"],function(){"use strict";var a=a||{};return a.products={},a.hasPage=function(b){return!!a.products[b]},a.register=function(b){if(!(b&&b.name&&b.fn))throw"CommonPageFactory: factory is lack of necessary infomation.";if(a.products[b.name])throw"CommonPageFactory: factory has been register in CommonPageFactory";a.products[b.name]=b.fn},a.create=function(b){return a.products[b]},a}),define("cCommonListPage",["libs","cUI","cPageView","cWidgetFactory","cCommonPageFactory","cWidgetListView"],function(a,b,c,d,e){"use strict";var f="CommonListPage";if(!e.hasPage(f)){var g=g||{};g.injectListView=function(a){a.workspace||(a.workspace=$(this.defaultHtml)),this.$el.append(a.workspace),a.container=a.container?this.$el.find(a.container):a.workspace.find("#c-list-view-container");var b=d.create("ListView");this.listview=new b(a)},g._onWidnowScroll=null,g.__isComplete__=!1,g.__isLoading__=!1,g.bottomLoading=null,g.addScrollListener=function(){this.__isComplete__=!1,this.__isLoading__=!1,$(window).bind("scroll",this._onWidnowScroll)},g.removeScrollListener=function(){$(window).unbind("scroll",this._onWidnowScroll),this.bottomLoading&&(this.bottomLoading.remove(),this.bottomLoading=null)},g.onWidnowScroll=function(){var a=b.Tools.getPageScrollPos();if(0!=a.top){var c=a.pageHeight-(a.top+a.height);81>=c&&!this.__isComplete__&&!this.__isLoading__&&(this.__isLoading__=!0,this.onBottomPull&&this.onBottomPull())}},g.closeBottomPull=function(){this.__isComplete__=!0},g.endPull=function(){this.__isLoading__=!1},g.showBottomLoading=function(){this.bottomLoading||(this.bottomLoading=$('<div class="cui-zl-load" id="zlLoading" style=""> <div class="cui-i cui-b-loading"></div><div class="cui-i  cui-mb-logo"></div> <p>加载中</p></div>')),this.$el.append(this.bottomLoading),this.bottomLoading.show()},g.hideBottomLoading=function(){this.bottomLoading&&this.bottomLoading.hide(),this.__isLoading__=!1},g.defaultHtml='<section class="res_list"><ul class="res_list_tab_arr_r" id="c-list-view-container"></ul></section>';var h=c.extend(g);e.register({name:f,fn:h})}}),define("cImgLazyload",["libs","cBase"],function(a,b){"use strict";var c=new b.Class({__propertys__:function(){this.isError=!1,this.uuid=_.uniqueId()+(new Date).getTime()},initialize:function(a){this.handleOpts(a),this.init()},checkWrapperDisplay:function(){this.isError||(this.TIMERRES&&clearInterval(this.TIMERRES),0==$(this.imgs[0]).offset().top&&(this.isError=!0,this.TIMERRES=setInterval($.proxy(function(){0,$(this.imgs[0]).offset().top>0&&(this.TIMERRES&&clearInterval(this.TIMERRES),0,this.isError=!1,this.refresh())},this),100)))},handleOpts:function(a){return this.isError=!1,a&&a.imgs&&a.imgs.length?(this.imgs=a.imgs,this.container=a.container||$(window),this.width=a.width,this.height=a.height,this.loadingImg=a.loadingImg||"http://pic.c-ctrip.com/vacation_v2/h5/group_travel/no_product_pic.png",this.loadingBg=a.loadingBg||"#ebebeb",this.needWrapper=!1,(this.width||this.height)&&(this.needWrapper=!0),this.wrapper=a.wrapper||'<div class="cui_lazyload_wrapper" style="text-align: center; vertical-align: middle; "></div>',void(this.imgContainer={})):void(this.isError=!0)},init:function(){this.isError||(this.initImgContainer(),this.lazyLoad(),this.bindEvents())},refresh:function(a){a&&this.handleOpts(a),this.init()},bindEvents:function(){this.isError||(this.destroy(),this.container.on("scroll.imglazyload"+this.uuid,$.proxy(function(){this.lazyLoad()},this)),$(window).on("resize.imglazyload"+this.uuid,$.proxy(function(){this.initImgContainer()},this)))},initImgContainer:function(){if(!this.isError){var a,b,c,d;for(b=0,c=this.imgs.length;c>b;b++)a=$(this.imgs[b]),a.attr("data-src")&&""!=a.attr("data-src")&&"1"!=a.attr("data-load")&&(d=a.offset(),this.imgContainer[d.top]||(this.imgContainer[d.top]=[]),this.imgContainer[d.top].push(a))}},_handleImg:function(a){var b,c;a.attr("data-src")&&""!=a.attr("data-src")&&(this.needWrapper&&(c=$(this.wrapper),c.css({width:this.width+"px",height:this.height+"px","background-color":this.loadingBg}),c.insertBefore(a),c.append(a)),b=$(new Image),a.attr("src")||a.attr("src",this.loadingImg),b.on("error",function(){a.attr("src",this.loadingImg)}).on("load",function(){a.attr("src",a.attr("data-src")),a.attr("data-load","1"),setTimeout(function(){c&&c[0]&&(a.insertBefore(c),c.remove())},1)}).attr("src",a.attr("data-src")))},lazyLoad:function(){if(!this.isError){var a,b,c,d,e,f=this.container.height(),g=this.container.scrollTop();for(a in this.imgContainer)if(parseInt(a)<g+f){for(b=this.imgContainer[a],d=0,e=b.length;e>d;d++)c=$(b[d]),this._handleImg(c);delete this.imgContainer[a]}}},destroy:function(){this.isError||(this.TIMERRES&&clearInterval(this.TIMERRES),this.container.off(".imglazyload"+this.uuid),$(window).off(".imglazyload"+this.uuid))}});return c});