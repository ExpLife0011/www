<!DOCTYPE html>
<html>

	<head lang="en">
		<meta charset="UTF-8">
		<script src="js/Angular.js"></script>
		<script src="src/ngMessage/messages.js" type="text/javascript" charset="utf-8"></script>
		<title>FALSE表单验证</title>
		<style type="text/css">

		</style>
	</head>

	<body ng-app="app">
		<!--
    	作者：648267773@qq.com
    	时间：2017-01-05
    	··········在输入框失误焦点后显示验证
    	ng-messages
    	描述：如果想要屏蔽浏览器对表单的默认验证行为，可以在表单元素上添加 novalidate 标记。
    -->
		<form name="signup_form" novalidate ng-submit="signupForm()" ng-controller="signupController">
			<label>Your name</label>
			<input type="text" placeholder="Name" name="name" ng-model="signup.name" ng-minlength=3 ng-maxlength=20 required />
			<div class="error" ng-messages="signup_form.name.$error" ng-messages-multiple>
				<div ng-message="required">Make sure you enter your name</div>
				<div ng-message="minlength">Your name must be at least 3 characters</div>
				<div ng-message="maxlength">Your name cannot be longer than 20 characters</div>
			</div>
			<button type="submit">Submit</button>
		</form>
		<script type="text/javascript">
			var app = angular.module('app', ['ngMessages']);
			app.directive('ngFocus', [function() {
				var FOCUS_CLASS = "ng-focused";
				return {
					restrict: 'A',
					require: 'ngModel',
					link: function(scope, element, attrs, ngModel) {
						ngModel.$focused = false;
						element.bind('focus', function(evt) {
							element.addClass(FOCUS_CLASS);
							scope.$apply(function() {
								ctrl.$focused = true;
							});
						}).bind('blur', function(evt) {
							element.removeClass(FOCUS_CLASS);
							scope.$apply(function() {
								ctrl.$focused = false;
							});
						});
					}
				};
			}]);

			app.controller('signupController', function($scope) {

				$scope.submitted = false;

				$scope.signupForm = function() {
					if($scope.signup_form.$valid) {
						// 正常提交
						alert('true');
					} else {
						alert('false')
						$scope.signup_form.submitted = true;
					}
				}

			});
		</script>
	</body>

</html>